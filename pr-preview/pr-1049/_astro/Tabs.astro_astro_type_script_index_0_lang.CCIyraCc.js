class c extends HTMLElement{static#e=new Map;#t;constructor(){super();const n=this.querySelector('[role="tablist"]');if(this.tabs=[...n.querySelectorAll('[role="tab"]')],this.panels=[...this.querySelectorAll(':scope > [role="tabpanel"]')],this.#t=this.dataset.syncKey,this.#t){const i=c.#e.get(this.#t)??[];i.push(this),c.#e.set(this.#t,i)}this.tabs.forEach((i,r)=>{i.addEventListener("click",t=>{t.preventDefault();const s=n.querySelector('[aria-selected="true"]');t.currentTarget!==s&&this.switchTab(t.currentTarget,r)}),i.addEventListener("keydown",t=>{const s=this.tabs.indexOf(t.currentTarget),e=t.key==="ArrowLeft"?s-1:t.key==="ArrowRight"?s+1:t.key==="Home"?0:t.key==="End"?this.tabs.length-1:null;e!==null&&this.tabs[e]&&(t.preventDefault(),this.switchTab(this.tabs[e],e))})})}switchTab(n,i,r=!0){if(!n)return;const t=r?this.getBoundingClientRect().top:0;this.tabs.forEach(e=>{e.setAttribute("aria-selected","false"),e.setAttribute("tabindex","-1")}),this.panels.forEach(e=>{e.hidden=!0});const s=this.panels[i];s&&(s.hidden=!1),n.removeAttribute("tabindex"),n.setAttribute("aria-selected","true"),r&&(n.focus(),c.#s(this,n.innerText),window.scrollTo({top:window.scrollY+(this.getBoundingClientRect().top-t)}))}static#s(n,i){const r=n.#t;if(!r||!i)return;const t=c.#e.get(r);if(t)for(const s of t){if(s===n)continue;const e=s.tabs.findIndex(a=>a.innerText===i);e!==-1&&s.switchTab(s.tabs[e],e,!1)}}}customElements.define("starlight-tabs",c);
