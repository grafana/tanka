<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/pr-preview/pr-891/styles.f637786602c126b31677.css" id="gatsby-global-css">@import url(https://fonts.googleapis.com/css?family=Inconsolata&display=swap);@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap);@font-face{font-family:Fira Mono;font-style:normal;font-display:swap;font-weight:400;src:local("Fira Mono Regular "),local("Fira Mono-Regular"),url(/pr-preview/pr-891/static/fira-mono-latin-400-e3ae866ff2823372c9e3aaadebbd8db2.woff2) format("woff2"),url(/pr-preview/pr-891/static/fira-mono-latin-400-452f020811cb7c0d8e4c7a8565279552.woff) format("woff")}@font-face{font-family:Fira Mono;font-style:normal;font-display:swap;font-weight:500;src:local("Fira Mono Medium "),local("Fira Mono-Medium"),url(/pr-preview/pr-891/static/fira-mono-latin-500-e8330ccb5d46418d07df67a12e125315.woff2) format("woff2"),url(/pr-preview/pr-891/static/fira-mono-latin-500-619d297444f7231cb1e2c2e90e460063.woff) format("woff")}@font-face{font-family:Fira Mono;font-style:normal;font-display:swap;font-weight:700;src:local("Fira Mono Bold "),local("Fira Mono-Bold"),url(/pr-preview/pr-891/static/fira-mono-latin-700-88eb04d0e7cd2ef944219997d022085f.woff2) format("woff2"),url(/pr-preview/pr-891/static/fira-mono-latin-700-dfbd25650dfa16dc45d8d6e57bbf13cf.woff) format("woff")}@font-face{font-family:Source Sans Pro;font-style:normal;font-display:swap;font-weight:200;src:local("Source Sans Pro Extra Light "),local("Source Sans Pro-Extra Light"),url(/pr-preview/pr-891/static/source-sans-pro-latin-200-d30190b81146365670a14117cefddec7.woff2) format("woff2"),url(/pr-preview/pr-891/static/source-sans-pro-latin-200-a3bea45981594e21f3a107386ba1a219.woff) format("woff")}@font-face{font-family:Source Sans Pro;font-style:italic;font-display:swap;font-weight:200;src:local("Source Sans Pro Extra Light italic"),local("Source Sans Pro-Extra Lightitalic"),url(/pr-preview/pr-891/static/source-sans-pro-latin-200italic-dba63c770ee612903f861b4fa8bc5a2e.woff2) format("woff2"),url(/pr-preview/pr-891/static/source-sans-pro-latin-200italic-9f7e37594212f66e41ed02e3ec504b8f.woff) format("woff")}@font-face{font-family:Source Sans Pro;font-style:normal;font-display:swap;font-weight:300;src:local("Source Sans Pro Light "),local("Source Sans Pro-Light"),url(/pr-preview/pr-891/static/source-sans-pro-latin-300-ede18477b85a5d781cd2f4001ecc5e67.woff2) format("woff2"),url(/pr-preview/pr-891/static/source-sans-pro-latin-300-a5002963b0570a073e28156403c78670.woff) format("woff")}@font-face{font-family:Source Sans Pro;font-style:italic;font-display:swap;font-weight:300;src:local("Source Sans Pro Light italic"),local("Source Sans Pro-Lightitalic"),url(/pr-preview/pr-891/static/source-sans-pro-latin-300italic-c179c8f264df4b31eab6c71a532f7599.woff2) format("woff2"),url(/pr-preview/pr-891/static/source-sans-pro-latin-300italic-f939f20b37caaa8e99bcd2e0ef22436c.woff) format("woff")}@font-face{font-family:Source Sans Pro;font-style:normal;font-display:swap;font-weight:400;src:local("Source Sans Pro Regular "),local("Source Sans Pro-Regular"),url(/pr-preview/pr-891/static/source-sans-pro-latin-400-899c8f78ce650d4009d42443897aa723.woff2) format("woff2"),url(/pr-preview/pr-891/static/source-sans-pro-latin-400-5cc3aae674ea3b199313b3b83bd795bc.woff) format("woff")}@font-face{font-family:Source Sans Pro;font-style:italic;font-display:swap;font-weight:400;src:local("Source Sans Pro Regular italic"),local("Source Sans Pro-Regularitalic"),url(/pr-preview/pr-891/static/source-sans-pro-latin-400italic-dac2fca7ba8512baa24172f1171c961f.woff2) format("woff2"),url(/pr-preview/pr-891/static/source-sans-pro-latin-400italic-86b2389fa562da6b9425271d1833d490.woff) format("woff")}@font-face{font-family:Source Sans Pro;font-style:normal;font-display:swap;font-weight:600;src:local("Source Sans Pro SemiBold "),local("Source Sans Pro-SemiBold"),url(/pr-preview/pr-891/static/source-sans-pro-latin-600-c85615b296302af51e683eecb5e371d4.woff2) format("woff2"),url(/pr-preview/pr-891/static/source-sans-pro-latin-600-a75563d7b9e5b1db163971b9a2e66216.woff) format("woff")}@font-face{font-family:Source Sans Pro;font-style:italic;font-display:swap;font-weight:600;src:local("Source Sans Pro SemiBold italic"),local("Source Sans Pro-SemiBolditalic"),url(/pr-preview/pr-891/static/source-sans-pro-latin-600italic-ae24ed0c9a034d7c4098d3ddcdcb57f2.woff2) format("woff2"),url(/pr-preview/pr-891/static/source-sans-pro-latin-600italic-c13797bd5e320111cf0af5c140ad9ee5.woff) format("woff")}@font-face{font-family:Source Sans Pro;font-style:normal;font-display:swap;font-weight:700;src:local("Source Sans Pro Bold "),local("Source Sans Pro-Bold"),url(/pr-preview/pr-891/static/source-sans-pro-latin-700-1a4bcb3ec9c508d478d4dbf6b56f6208.woff2) format("woff2"),url(/pr-preview/pr-891/static/source-sans-pro-latin-700-b03f2ec28f8e60e61974dd8c57610e5b.woff) format("woff")}@font-face{font-family:Source Sans Pro;font-style:italic;font-display:swap;font-weight:700;src:local("Source Sans Pro Bold italic"),local("Source Sans Pro-Bolditalic"),url(/pr-preview/pr-891/static/source-sans-pro-latin-700italic-ac7f680ecb10b2d7d452560d91e617d6.woff2) format("woff2"),url(/pr-preview/pr-891/static/source-sans-pro-latin-700italic-15776eec451ff4c88330cc66edd9e1e4.woff) format("woff")}@font-face{font-family:Source Sans Pro;font-style:normal;font-display:swap;font-weight:900;src:local("Source Sans Pro Black "),local("Source Sans Pro-Black"),url(/pr-preview/pr-891/static/source-sans-pro-latin-900-d8eab344801820b04142708a330623fc.woff2) format("woff2"),url(/pr-preview/pr-891/static/source-sans-pro-latin-900-a6f749c85b751ef81fd99c6423c5ff4f.woff) format("woff")}@font-face{font-family:Source Sans Pro;font-style:italic;font-display:swap;font-weight:900;src:local("Source Sans Pro Black italic"),local("Source Sans Pro-Blackitalic"),url(/pr-preview/pr-891/static/source-sans-pro-latin-900italic-f6a4e05514b656022c3ed8be7f81d256.woff2) format("woff2"),url(/pr-preview/pr-891/static/source-sans-pro-latin-900italic-f20b423a121558d70c32160b86c9e21e.woff) format("woff")}</style><meta name="generator" content="Gatsby 2.32.13"/><title data-rh="true">Exporting as YAML | Tanka</title><meta data-rh="true" name="description" content="Flexible, reusable and concise configuration for Kubernetes"/><meta data-rh="true" property="og:title" content="Exporting as YAML"/><meta data-rh="true" property="og:description" content="Flexible, reusable and concise configuration for Kubernetes"/><meta data-rh="true" property="og:type" content="website"/><meta data-rh="true" name="twitter:card" content="summary"/><meta data-rh="true" name="twitter:title" content="Exporting as YAML"/><meta data-rh="true" name="twitter:description" content="Flexible, reusable and concise configuration for Kubernetes"/><link rel="icon" href="/pr-preview/pr-891/favicon-32x32.png?v=815afb474b603167d9aafa836ab02617" type="image/png"/><link rel="icon" href="/pr-preview/pr-891/favicon.svg?v=815afb474b603167d9aafa836ab02617" type="image/svg+xml"/><link rel="manifest" href="/pr-preview/pr-891/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#000000"/><link rel="apple-touch-icon" sizes="48x48" href="/pr-preview/pr-891/icons/icon-48x48.png?v=815afb474b603167d9aafa836ab02617"/><link rel="apple-touch-icon" sizes="72x72" href="/pr-preview/pr-891/icons/icon-72x72.png?v=815afb474b603167d9aafa836ab02617"/><link rel="apple-touch-icon" sizes="96x96" href="/pr-preview/pr-891/icons/icon-96x96.png?v=815afb474b603167d9aafa836ab02617"/><link rel="apple-touch-icon" sizes="144x144" href="/pr-preview/pr-891/icons/icon-144x144.png?v=815afb474b603167d9aafa836ab02617"/><link rel="apple-touch-icon" sizes="192x192" href="/pr-preview/pr-891/icons/icon-192x192.png?v=815afb474b603167d9aafa836ab02617"/><link rel="apple-touch-icon" sizes="256x256" href="/pr-preview/pr-891/icons/icon-256x256.png?v=815afb474b603167d9aafa836ab02617"/><link rel="apple-touch-icon" sizes="384x384" href="/pr-preview/pr-891/icons/icon-384x384.png?v=815afb474b603167d9aafa836ab02617"/><link rel="apple-touch-icon" sizes="512x512" href="/pr-preview/pr-891/icons/icon-512x512.png?v=815afb474b603167d9aafa836ab02617"/><link as="script" rel="preload" href="/pr-preview/pr-891/webpack-runtime-ab565a268c55f9a48625.js"/><link as="script" rel="preload" href="/pr-preview/pr-891/framework-3d5d6f3c5ba6d5f455c5.js"/><link as="script" rel="preload" href="/pr-preview/pr-891/styles-95d00f891faf7b06d026.js"/><link as="script" rel="preload" href="/pr-preview/pr-891/f0e45107-91cefa4606c78384043e.js"/><link as="script" rel="preload" href="/pr-preview/pr-891/app-e4f721d262bd192a9d56.js"/><link as="script" rel="preload" href="/pr-preview/pr-891/component---docs-exporting-md-4be6f959269cfaf1c33c.js"/><link as="fetch" rel="preload" href="/pr-preview/pr-891/page-data/exporting/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/pr-preview/pr-891/page-data/sq/d/1635659820.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/pr-preview/pr-891/page-data/sq/d/1635659820.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/pr-preview/pr-891/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1ouyflx">.css-1ouyflx{font-family:'Source Sans Pro',sans-serif;font-size:20px;font-weight:400;line-height:1.5;color:var(--theme-ui-colors-text,#2D3747);background-color:var(--theme-ui-colors-background,#FFFFFF);}</style><div class="css-1ouyflx"><style data-emotion-css="jrjj6h">.css-jrjj6h > div{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><style data-emotion-css="1ubpee3">.css-1ubpee3{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-1ubpee3 > div{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><style data-emotion-css="hbri28">.css-hbri28{box-sizing:border-box;min-width:0;min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-hbri28 > div{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><div data-testid="layout" class="css-hbri28"><style data-emotion="css-global 1xva7m0">body{margin:0;padding:0;}.icon-link{display:none;}.with-overlay{overflow:hidden;}</style><style data-emotion-css="zf0iqh">.css-zf0iqh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><style data-emotion-css="1tjxv7i">.css-1tjxv7i{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><style data-emotion-css="238csb">.css-238csb{box-sizing:border-box;min-width:0;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><main class="css-238csb"><style data-emotion-css="18wmtq">.css-18wmtq{background-color:var(--theme-ui-colors-header-bg,#F5F6F7);position:relative;z-index:1;border-bottom:1px solid var(--theme-ui-colors-border,#CED4DE);}</style><div data-testid="header" class="css-18wmtq"><style data-emotion-css="zankq9">.css-zankq9{display:none;position:absolute;top:calc(100% + 15px);left:30px;}@media screen and (max-width:57.5em){.css-zankq9{display:block;}}</style><style data-emotion-css="1s0wdqz">.css-1s0wdqz{box-sizing:border-box;min-width:0;display:none;position:absolute;top:calc(100% + 15px);left:30px;}@media screen and (max-width:57.5em){.css-1s0wdqz{display:block;}}</style><div class="css-1s0wdqz"><style data-emotion-css="4019lz">.css-4019lz{padding:0;outline:none;background:transparent;border:none;color:var(--theme-ui-colors-header-text,#2D3747);opacity:0.5;cursor:pointer;}.css-4019lz:hover{cursor:pointer;}</style><button class="css-4019lz"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button></div><style data-emotion-css="z6jak6">.css-z6jak6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding-left:32px;padding-right:32px;position:relative;height:80px;}</style><div class="css-z6jak6"><style data-emotion-css="xenp3v">.css-xenp3v{-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;font-size:24px;}</style><style data-emotion-css="1abzlu">.css-1abzlu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;font-size:24px;}</style><style data-emotion-css="ug0363">.css-ug0363{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;font-size:24px;}</style><div data-testid="logo" class="css-ug0363"><style data-emotion-css="1ywu66l">.css-1ywu66l{font-weight:600;color:var(--theme-ui-colors-header-text,#2D3747);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;line-height:1.2;}.css-1ywu66l:hover{color:var(--theme-ui-colors-primary,#0B5FFF);}</style><a class="css-1ywu66l" href="/pr-preview/pr-891/"><style data-emotion-css="1baulvz">.css-1baulvz{display:inline-block;}</style><div class="css-1baulvz"><style data-emotion-css="1gmwkto">.css-1gmwkto{max-height:1.2em;margin-right:0.2em;display:inline-block;float:left;}</style><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI0LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxNDQgNjguNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTQ0IDY4LjU7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDp1cmwoI1NWR0lEXzFfKTt9Cgkuc3Qxe2ZpbGw6I0ZGRkZGRjt9Cgkuc3Qye2ZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fQo8L3N0eWxlPgo8bGluZWFyR3JhZGllbnQgaWQ9IlNWR0lEXzFfIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjcxLjQxNjMiIHkxPSItNTMuNTkiIHgyPSI3Mi4xNzAzIiB5Mj0iOTAuNDE0NCI+Cgk8c3RvcCAgb2Zmc2V0PSIwLjM5ODQiIHN0eWxlPSJzdG9wLWNvbG9yOiNGQUNBMTAiLz4KCTxzdG9wICBvZmZzZXQ9IjAuNjQ5OCIgc3R5bGU9InN0b3AtY29sb3I6I0Y0OEMyMCIvPgoJPHN0b3AgIG9mZnNldD0iMC44NjIyIiBzdHlsZT0ic3RvcC1jb2xvcjojRjA1QjJEIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xNDQsNTcuOWMwLDEtMC44LDEuNy0xLjcsMS43SDEuN2MtMSwwLTEuNy0wLjgtMS43LTEuN3MwLjgtMS43LDEuNy0xLjdoMTQwLjVDMTQzLjIsNTYuMSwxNDQsNTYuOSwxNDQsNTcuOXoKCSBNMTUuNiw1MC4xaDEwMS42bDEzLjMtMzMuNWwtNTYuNiw0Ljh2LTguM0gyNS4xdjEyLjRMOC42LDI2LjlMMTUuNiw1MC4xeiBNNjYuNCw4LjloLTM0VjBoMzQuMUw2Ni40LDguOXogTTEyNC44LDY1SDE5LjIKCWMtMSwwLTEuNywwLjgtMS43LDEuN3MwLjgsMS43LDEuNywxLjdoMTA1LjVjMSwwLDEuNy0wLjgsMS43LTEuN1MxMjUuNyw2NSwxMjQuOCw2NXoiLz4KPC9zdmc+Cg==" alt="That&#x27;s my logo" class="css-1gmwkto"/><span class="css-1baulvz">Grafana Tanka</span><style data-emotion-css="sbk1gb">.css-sbk1gb{font-size:0.7em;display:block;}</style><span class="css-sbk1gb">Flexible, reusable and concise configuration for Kubernetes</span></div></a></div><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><style data-emotion-css="80zs6q">.css-80zs6q{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-80zs6q"><style data-emotion-css="12z0wuy">.css-12z0wuy{margin-right:8px;}</style><style data-emotion-css="q6cf68">.css-q6cf68{box-sizing:border-box;min-width:0;margin-right:8px;}</style><div class="css-q6cf68"><style data-emotion-css="1is33jg">.css-1is33jg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:12px;border:none;border-radius:9999px;background-color:var(--theme-ui-colors-header-button-bg,#0B5FFF);color:var(--theme-ui-colors-header-button-color,#FFFFFF);font-size:12px;font-weight:600;cursor:pointer;}</style><a href="https://github.com/grafana/tanka" target="_blank" rel="noopener noreferrer" class="css-1is33jg"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></div></div><style data-emotion-css="1gncnz1">.css-1gncnz1{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:absolute;bottom:-40px;right:30px;background-color:transparent;color:var(--theme-ui-colors-muted,#67788a);font-size:14px;-webkit-text-decoration:none;text-decoration:none;border-radius:4px;}</style><a href="https://github.com/grafana/tanka/edit/main/docs/docs/exporting.md" target="_blank" rel="noopener noreferrer" class="css-1gncnz1"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg><style data-emotion-css="1iuj5ih">.css-1iuj5ih{padding-left:8px;}</style><style data-emotion-css="1x2jprh">.css-1x2jprh{box-sizing:border-box;min-width:0;padding-left:8px;}</style><div class="css-1x2jprh">Edit page</div></a></div></div><style data-emotion-css="1nfi0ai">.css-1nfi0ai{padding-top:0;padding-bottom:0;-webkit-flex:1;-ms-flex:1;flex:1;display:grid;grid-template-columns:250px minmax(0,1fr);min-height:100vh;}@media screen and (max-width:57.5em){.css-1nfi0ai{display:block;}}</style><div class="css-1nfi0ai"><style data-emotion-css="1tn7q1x">.css-1tn7q1x{z-index:999;position:fixed;top:81px;right:0;bottom:0;left:0;background:rgba(0,0,0,0.6);-webkit-transition:all .2s ease-out;transition:all .2s ease-out;visibility:hidden;opacity:0;}</style><style data-emotion-css="h4snl3">.css-h4snl3{box-sizing:border-box;min-width:0;z-index:999;position:fixed;top:81px;right:0;bottom:0;left:0;background:rgba(0,0,0,0.6);-webkit-transition:all .2s ease-out;transition:all .2s ease-out;visibility:hidden;opacity:0;}</style><div class="css-h4snl3"></div><style data-emotion-css="1ethd5x">.css-1ethd5x{padding-top:32px;padding-bottom:32px;padding-left:32px;padding-right:32px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:-webkit-sticky;position:sticky;top:0;z-index:1;min-width:0;max-height:100vh;border-right:1px solid var(--theme-ui-colors-border,#CED4DE);overflow:auto;-webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-sidebar-bg,#FFFFFF);}@media screen and (max-width:57.5em){.css-1ethd5x{z-index:9999;display:block;position:fixed;top:81px;left:0;bottom:0;width:256px;padding-left:32px;padding-right:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);-webkit-transition:-webkit-transform .2s ease-out;-webkit-transition:transform .2s ease-out;transition:transform .2s ease-out;-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);}}</style><style data-emotion-css="1li9yso">.css-1li9yso{box-sizing:border-box;min-width:0;padding-top:32px;padding-bottom:32px;padding-left:32px;padding-right:32px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:-webkit-sticky;position:sticky;top:0;z-index:1;min-width:0;max-height:100vh;border-right:1px solid var(--theme-ui-colors-border,#CED4DE);overflow:auto;-webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-sidebar-bg,#FFFFFF);}@media screen and (max-width:57.5em){.css-1li9yso{z-index:9999;display:block;position:fixed;top:81px;left:0;bottom:0;width:256px;padding-left:32px;padding-right:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);-webkit-transition:-webkit-transform .2s ease-out;-webkit-transition:transform .2s ease-out;transition:transform .2s ease-out;-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);}}</style><div data-testid="sidebar" class="css-1li9yso"><style data-emotion-css="lcm9hh">.css-lcm9hh{margin-bottom:16px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div data-testid="nav-search" class="css-lcm9hh"><style data-emotion-css="1mo6uhh">.css-1mo6uhh{color:var(--theme-ui-colors-border,#CED4DE);margin-right:8px;}</style><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-1mo6uhh"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><style data-emotion-css="1bbueiu">.css-1bbueiu{outline:none;background:none;border:none;color:var(--theme-ui-colors-text,#2D3747);font-size:14px;}</style><input placeholder="Type to search..." value="" class="css-1bbueiu"/></div><style data-emotion-css="1rqvyud">.css-1rqvyud{margin-top:8px;margin-bottom:8px;display:block;color:var(--theme-ui-colors-sidebar-navGroup,#2D3747);-webkit-text-decoration:none;text-decoration:none;font-size:16px;}.css-1rqvyud.active{color:var(--theme-ui-colors-sidebar-navLinkActive,#0B5FFF);}</style><a class="css-1rqvyud" href="/pr-preview/pr-891/">Introduction</a><a class="css-1rqvyud" href="/pr-preview/pr-891/install">Installation</a><style data-emotion-css="1ebprri">.css-1ebprri{margin-top:16px;margin-bottom:16px;}</style><div data-testid="nav-group" class="css-1ebprri"><style data-emotion-css="1c8kbwa">.css-1c8kbwa{margin-bottom:4px;font-size:16px;font-weight:500;color:var(--theme-ui-colors-sidebar-navGroup,#2D3747);cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-1c8kbwa">Tutorial<style data-emotion-css="cu2sly">.css-cu2sly{margin-left:4px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-align-self:baseline;-ms-flex-item-align:baseline;align-self:baseline;-webkit-transform:rotateX(0deg);-ms-transform:rotateX(0deg);transform:rotateX(0deg);-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-transition:-webkit-transform .3s ease-in-out;-webkit-transition:transform .3s ease-in-out;transition:transform .3s ease-in-out;}</style><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-cu2sly"><polyline points="6 9 12 15 18 9"></polyline></svg></div><style data-emotion-css="1isemmb">.css-1isemmb{margin-left:8px;}</style><div data-testid="nav-group-links" class="css-1isemmb"></div></div><div data-testid="nav-group" class="css-1ebprri"><div class="css-1c8kbwa">Writing Jsonnet<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-cu2sly"><polyline points="6 9 12 15 18 9"></polyline></svg></div><div data-testid="nav-group-links" class="css-1isemmb"></div></div><div data-testid="nav-group" class="css-1ebprri"><div class="css-1c8kbwa">Libraries<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-cu2sly"><polyline points="6 9 12 15 18 9"></polyline></svg></div><div data-testid="nav-group-links" class="css-1isemmb"></div></div><div data-testid="nav-group" class="css-1ebprri"><div class="css-1c8kbwa">Advanced features<style data-emotion-css="1scp5x8">.css-1scp5x8{margin-left:4px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-align-self:baseline;-ms-flex-item-align:baseline;align-self:baseline;-webkit-transform:rotateX(180deg);-ms-transform:rotateX(180deg);transform:rotateX(180deg);-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-transition:-webkit-transform .3s ease-in-out;-webkit-transition:transform .3s ease-in-out;transition:transform .3s ease-in-out;}</style><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-1scp5x8"><polyline points="6 9 12 15 18 9"></polyline></svg></div><div data-testid="nav-group-links" class="css-1isemmb"><a class="css-1rqvyud" href="/pr-preview/pr-891/garbage-collection">Garbage collection</a><a class="css-1rqvyud" href="/pr-preview/pr-891/helm">Helm support</a><a class="css-1rqvyud" href="/pr-preview/pr-891/kustomize">Kustomize support</a><a class="css-1rqvyud" href="/pr-preview/pr-891/output-filtering">Output filtering</a><a aria-current="page" class="css-1rqvyud active" href="/pr-preview/pr-891/exporting">Exporting as YAML</a><style data-emotion-css="1ooej63">.css-1ooej63{margin-top:8px;margin-bottom:8px;display:block;color:var(--theme-ui-colors-sidebar-tocLink,#67788a);-webkit-text-decoration:none;text-decoration:none;font-size:14px;margin-left:16px;position:relative;}.css-1ooej63.active{color:var(--theme-ui-colors-sidebar-tocLinkActive,#1D2330);}.css-1ooej63.active::before{content:"";position:absolute;display:block;top:2px;left:-8px;height:1rem;background-color:var(--theme-ui-colors-primary,#0B5FFF);-webkit-transition:width 200ms ease 0s;transition:width 200ms ease 0s;width:2px;border-radius:1px;}</style><a class=" css-1ooej63" href="/pr-preview/pr-891/exporting#filenames">Filenames</a><a class=" css-1ooej63" href="/pr-preview/pr-891/exporting#multiple-environments">Multiple environments</a><a class=" css-1ooej63" href="/pr-preview/pr-891/exporting#performance-features">Performance features</a><a class="css-1rqvyud" href="/pr-preview/pr-891/inline-environments">Inline environments</a><a class="css-1rqvyud" href="/pr-preview/pr-891/server-side-apply">Server-Side Apply</a></div></div><div data-testid="nav-group" class="css-1ebprri"><div class="css-1c8kbwa">References<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-cu2sly"><polyline points="6 9 12 15 18 9"></polyline></svg></div><div data-testid="nav-group-links" class="css-1isemmb"></div></div><a class="css-1rqvyud" href="/pr-preview/pr-891/faq">Frequently asked questions</a><a class="css-1rqvyud" href="/pr-preview/pr-891/known-issues">Known issues</a></div><style data-emotion-css="1w3d2mg">.css-1w3d2mg{background-color:var(--theme-ui-colors-background,#FFFFFF);position:relative;max-width:1280px;padding-top:48px;padding-bottom:48px;padding-left:32px;padding-right:32px;padding:32px;}@media screen and (max-width:57.5em){.css-1w3d2mg{padding-top:48px;padding-bottom:32px;padding-left:32px;padding-right:32px;}}</style><style data-emotion-css="kjtkh5">.css-kjtkh5{width:100%;min-width:0;max-width:1280px;margin-left:auto;margin-right:auto;padding:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);position:relative;max-width:1280px;padding-top:48px;padding-bottom:48px;padding-left:32px;padding-right:32px;padding:32px;}@media screen and (max-width:57.5em){.css-kjtkh5{padding-top:48px;padding-bottom:32px;padding-left:32px;padding-right:32px;}}</style><style data-emotion-css="1307vk3">.css-1307vk3{box-sizing:border-box;min-width:0;width:100%;min-width:0;max-width:1280px;margin-left:auto;margin-right:auto;padding:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);position:relative;max-width:1280px;padding-top:48px;padding-bottom:48px;padding-left:32px;padding-right:32px;padding:32px;}@media screen and (max-width:57.5em){.css-1307vk3{padding-top:48px;padding-bottom:32px;padding-left:32px;padding-right:32px;}}</style><div data-testid="main-container" class="css-1307vk3"><style data-emotion-css="1vci3bl">.css-1vci3bl{padding:0;margin:0;margin-bottom:16px;font-size:48px;font-family:'Source Sans Pro',sans-serif;line-height:1.125;font-weight:700;}</style><h1 id="exporting-as-yaml" class="css-1vci3bl">Exporting as YAML</h1><style data-emotion-css="1ftn47p">.css-1ftn47p{padding:0;margin:0;margin-bottom:16px;}</style><p class="css-1ftn47p">Tanka provides you with a day-to-day workflow for working with Kubernetes clusters:</p><style data-emotion-css="cvh4i0">.css-cvh4i0{padding:0;margin:0;margin-bottom:16px;list-style-position:outside;list-style-image:none;margin-left:16px;}</style><ul class="css-cvh4i0"><style data-emotion-css="q43a5f">.css-q43a5f{margin-bottom:4px;padding-left:0;}.css-q43a5f ol{margin-top:8px;margin-bottom:8px;margin-left:16px;}.css-q43a5f ul{margin-top:8px;margin-bottom:8px;margin-left:16px;}.css-q43a5f p{margin-bottom:8px;}</style><li class="css-q43a5f"><style data-emotion-css="hvghbq">.css-hvghbq{background:#2d37471f;font-family:Fira Mono,monospace;font-size:1rem;}</style><code class="css-hvghbq">tk show</code> for quickly checking the YAML representation looks good</li><li class="css-q43a5f"><code class="css-hvghbq">tk diff</code> to ensure your changes will behave like they should</li><li class="css-q43a5f"><code class="css-hvghbq">tk apply</code> makes it happen</li></ul><p class="css-1ftn47p">However sometimes it can be required to integrate with other tooling that does
only support <code class="css-hvghbq">.yaml</code> files.</p><p class="css-1ftn47p">For that case, <code class="css-hvghbq">tk export</code> can be used:</p><style data-emotion-css="1m977hn">.css-1m977hn{margin-top:32px;margin-bottom:32px;padding:16px;text-align:left;font-family:Inconsolata;border-radius:4px;font-size:1rem;line-height:1.4;overflow-x:auto;}.css-1m977hn dark{[object Object];}.css-1m977hn light{[object Object];}</style><pre class="material-theme-darker vscode-highlight css-1m977hn" data-language="bash"><style data-emotion-css="11neleh">.css-11neleh{font-family:Fira Mono,monospace;font-size:1rem;}</style><code class="css-11neleh"><span class="vscode-highlight-line"><span class="mtk3 mtki">#           &lt;outputDir&gt; &lt;environment&gt;</span></span>
<span class="vscode-highlight-line"><span class="mtk1">$ tk </span><span class="mtk12">export</span><span class="mtk1"> promtail/   environments/promtail</span></span></code></pre><style data-emotion-css="ehrjfx">.css-ehrjfx{border-left:.25em solid black;border-color:var(--theme-ui-colors-text,#2D3747);padding:.25em;padding-left:1em;background:#2d37471f;margin-bottom:1rem;}</style><div class="css-ehrjfx"><p style="margin-bottom:0" class="css-1ftn47p"><style data-emotion-css="1vg6q84">.css-1vg6q84{font-weight:700;}</style><strong class="css-1vg6q84">Note:</strong> The arguments flipped in v0.14.0, the <code class="css-hvghbq">&lt;outputDir&gt;</code> comes first now.</p></div><p class="css-1ftn47p">This will create a separate <code class="css-hvghbq">.yaml</code> file for each Kubernetes resource included in your Jsonnet.</p><h2 id="filenames"><style data-emotion-css="1r0pe6c">.css-1r0pe6c{color:inherit;-webkit-text-decoration:none;text-decoration:none;}.css-1r0pe6c:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="#filenames" class="css-1r0pe6c">Filenames</a></h2><p class="css-1ftn47p">Tanka by default uses the following pattern:</p><pre class="material-theme-darker vscode-highlight css-1m977hn" data-language="bash"><code class="css-11neleh"><span class="vscode-highlight-line"><span class="mtk5">${</span><span class="mtk8">apiVersion</span><span class="mtk5">}</span><span class="mtk1">.</span><span class="mtk5">${</span><span class="mtk8">kind</span><span class="mtk5">}</span><span class="mtk1">-</span><span class="mtk5">${</span><span class="mtk8">metadata.name</span><span class="mtk5">}</span><span class="mtk1">.yaml</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk3 mtki"># examples:</span></span>
<span class="vscode-highlight-line"><span class="mtk1">apps-v1.Deployment-distributor.yaml</span></span>
<span class="vscode-highlight-line"><span class="mtk1">v1.ConfigMap-loki.yaml</span></span>
<span class="vscode-highlight-line"><span class="mtk1">v1.Service-ingester.yaml</span></span></code></pre><p class="css-1ftn47p">If that does not fit your need, you can provide your own pattern using the <code class="css-hvghbq">--format</code> flag:</p><pre class="material-theme-darker vscode-highlight css-1m977hn" data-language="bash"><code class="css-11neleh"><span class="vscode-highlight-line"><span class="mtk1">tk </span><span class="mtk12">export</span><span class="mtk1"> promtail environments/promtail --format=</span><span class="mtk5">&#x27;</span><span class="mtk6">{{.metadata.labels.app}}-{{.metadata.name}}-{{.kind}}</span><span class="mtk5">&#x27;</span></span></code></pre><div class="css-ehrjfx"><p style="margin-bottom:0" class="css-1ftn47p">The syntax is Go <code class="css-hvghbq">text/template</code>. See <style data-emotion-css="1iv9jyz">.css-1iv9jyz{color:var(--theme-ui-colors-primary,#0B5FFF);-webkit-text-decoration:none;text-decoration:none;}.css-1iv9jyz:hover{color:secondary;-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="https://pkg.go.dev/text/template" class="css-1iv9jyz">https://pkg.go.dev/text/template</a>
for reference.</p></div><p class="css-1ftn47p">This would include the label named <code class="css-hvghbq">app</code>, the <code class="css-hvghbq">name</code> and <code class="css-hvghbq">kind</code> of the resource:</p><pre class="material-theme-darker vscode-highlight css-1m977hn" data-language=""><code class="css-11neleh"><span class="vscode-highlight-line">loki-distributor-Deployment</span>
<span class="vscode-highlight-line">loki-loki-ConfigMap</span>
<span class="vscode-highlight-line">loki-ingester-Service</span></code></pre><p class="css-1ftn47p">You can optionally use the template function <code class="css-hvghbq">lower</code> for lower-casing fields, e.g. in the above example</p><pre class="material-theme-darker vscode-highlight css-1m977hn" data-language="bash"><code class="css-11neleh"><span class="vscode-highlight-line"><span class="mtk1">... --format=</span><span class="mtk5">&#x27;</span><span class="mtk6">{{.metadata.labels.app}}-{{.metadata.name}}-{{.kind | lower}}</span><span class="mtk5">&#x27;</span></span></code></pre><p class="css-1ftn47p">would yield</p><pre class="material-theme-darker vscode-highlight css-1m977hn" data-language=""><code class="css-11neleh"><span class="vscode-highlight-line">loki-distributor-deployment</span></code></pre><p class="css-1ftn47p">etc.</p><p class="css-1ftn47p">You can also use a different file extension by providing <code class="css-hvghbq">--extension=&#x27;yml&#x27;</code>, for example.</p><h2 id="multiple-environments"><a href="#multiple-environments" class="css-1r0pe6c">Multiple environments</a></h2><p class="css-1ftn47p">Tanka can also export multiple inline environments, as showcased in <a href="/pr-preview/pr-891/inline-environments#use-case-consistent-inline-environments" class="css-1iv9jyz">Use case: consistent inline
environments</a>. This follows the same
principles as describe before with the addition that you can also refer to Environment specific data through the <code class="css-hvghbq">env</code>
keyword.</p><p class="css-1ftn47p">For example an export might refer to data from the Environment spec:</p><pre class="material-theme-darker vscode-highlight css-1m977hn" data-language="bash"><code class="css-11neleh"><span class="vscode-highlight-line"><span class="mtk3 mtki"># Format based on environment {{env.&lt;...&gt;}}</span></span>
<span class="vscode-highlight-line"><span class="mtk1">$ tk </span><span class="mtk12">export</span><span class="mtk1"> exportDir environments/dev/ \</span></span>
<span class="vscode-highlight-line"><span class="mtk1">  --format </span><span class="mtk5">&#x27;</span><span class="mtk6">{{env.metadata.labels.cluster}}/{{env.spec.namespace}}//{{.kind}}-{{.metadata.name}}</span><span class="mtk5">&#x27;</span></span></code></pre><p class="css-1ftn47p">Even more advanced use cases allow you to export multiple environments in a single execution:</p><pre class="material-theme-darker vscode-highlight css-1m977hn" data-language="bash"><code class="css-11neleh"><span class="vscode-highlight-line"><span class="mtk3 mtki"># Export multiple environments</span></span>
<span class="vscode-highlight-line"><span class="mtk1">$ tk </span><span class="mtk12">export</span><span class="mtk1"> exportDir environments/dev/ environments/qa/</span></span>
<span class="vscode-highlight-line"><span class="mtk3 mtki"># Recursive export</span></span>
<span class="vscode-highlight-line"><span class="mtk1">$ tk </span><span class="mtk12">export</span><span class="mtk1"> exportDir environments/ --recursive</span></span>
<span class="vscode-highlight-line"><span class="mtk3 mtki"># Recursive export with labelSelector</span></span>
<span class="vscode-highlight-line"><span class="mtk1">$ tk </span><span class="mtk12">export</span><span class="mtk1"> exportDir environments/ -r -l team=infra</span></span></code></pre><h2 id="performance-features"><a href="#performance-features" class="css-1r0pe6c">Performance features</a></h2><p class="css-1ftn47p">When exporting a large amount of environments, jsonnet evaluation can become a bottleneck. To speed up the process, Tanka provides a few optional features.</p><h3 id="partial-export-in-a-gitops-context"><a href="#partial-export-in-a-gitops-context" class="css-1r0pe6c">Partial export (in a GitOps context)</a></h3><p class="css-1ftn47p">Given multiple environments, one may want to only export the environments that were modified since the last export. This is enabled by passing both the <code class="css-hvghbq">--merge-strategy=replace-envs</code> flags.</p><p class="css-1ftn47p">When these flags are passed, Tanka will:</p><ol class="css-cvh4i0"><li class="css-q43a5f">Delete the manifests that were previously exported by the environments that are being exported. This is done by looking at the <code class="css-hvghbq">manifest.json</code> file that is generated by Tanka when exporting. The related entries are also removed from the <code class="css-hvghbq">manifest.json</code> file.</li><li class="css-q43a5f">Generate the manifests for the targeted environments into the output directory.</li><li class="css-q43a5f">Add in the new manifests entries into the <code class="css-hvghbq">manifest.json</code> file and re-export it.</li></ol><h4 id="finding-out-which-environments-to-export"><a href="#finding-out-which-environments-to-export" class="css-1r0pe6c">Finding out which environments to export</a></h4><p class="css-1ftn47p">Tanka provides the <code class="css-hvghbq">tk tool importers</code> command to figure out which <code class="css-hvghbq">main.jsonnet</code> need to be re-exported based on what files were modified in a workspace.</p><p class="css-1ftn47p">If, for example, the <code class="css-hvghbq">lib/my-lib/main.libsonnet</code> file was modified, you could run the command like this to find which files to export:</p><pre class="material-theme-darker vscode-highlight css-1m977hn" data-language="console"><code class="css-11neleh"><span class="vscode-highlight-line"># Find out which envs to re-export</span>
<span class="vscode-highlight-line">$ tk tool importers lib/my-lib/main.libsonnet</span>
<span class="vscode-highlight-line">my-repo-path/jsonnet/environments/my-env/main.jsonnet</span>
<span class="vscode-highlight-line"></span>
<span class="vscode-highlight-line"># Re-export the envs</span>
<span class="vscode-highlight-line">$ tk export myoutputdir my-repo-path/jsonnet/environments/my-env/main.jsonnet --merge-strategy=replace-envs</span></code></pre><p class="css-1ftn47p">Note that deleted environments need special consideration when doing this.
The <code class="css-hvghbq">tk tool importers</code> utility only works with existing files so deleting an environment will result in stale <code class="css-hvghbq">manifest.json</code> entries and moving an environment will result in manifest conflicts.
In order to correctly handle deleted environments, they need to be passed to the export command:</p><pre class="material-theme-darker vscode-highlight css-1m977hn" data-language="console"><code class="css-11neleh"><span class="vscode-highlight-line">$ tk export myoutputdir my-repo-path/jsonnet/environments/my-new-env-path/main.jsonnet --merge-strategy=replace-envs \</span>
<span class="vscode-highlight-line">  --merge-deleted-envs my-repo-path/jsonnet/environments/my-old-env-path/main.jsonnet \</span>
<span class="vscode-highlight-line">  --merge-deleted-envs my-repo-path/jsonnet/environments/other-deleted-env-path/main.jsonnet</span></code></pre><h3 id="using-a-memory-ballast"><a href="#using-a-memory-ballast" class="css-1r0pe6c">Using a memory ballast</a></h3><p class="css-1ftn47p"><em class="css-0">Read <a href="https://blog.twitch.tv/en/2019/04/10/go-memory-ballast-how-i-learnt-to-stop-worrying-and-love-the-heap/" class="css-1iv9jyz">this blog post</a> for more information about memory ballasts.</em></p><p class="css-1ftn47p">For large environments that load lots of data into memory on evaluation, a memory ballast can dramatically improve performance. This feature is exposed through the <code class="css-hvghbq">--mem-ballast-size-bytes</code> flag on the export command.</p><p class="css-1ftn47p">Anecdotally (Grafana Labs), environments that took around a minute to load were able to load in around 45 secs with a ballast of 5GB (<code class="css-hvghbq">--mem-ballast-size-bytes=5368709120</code>). Decreasing the ballast size resulted in negative impact on performance, and increasing it more did not result in any noticeable impact.</p><h3 id="caching"><a href="#caching" class="css-1r0pe6c">Caching</a></h3><p class="css-1ftn47p">Tanka can also cache the results of the export. This is useful if you often export the same files and want to avoid recomputing them. The cache key is calculated from the main file and all of its transitive imports, so any change to any file possibly used in an environment will invalidate the cache.</p><p class="css-1ftn47p">This is configured by two flags:</p><ul class="css-cvh4i0"><li class="css-q43a5f"><code class="css-hvghbq">--cache-path</code>: The local filesystem path where the cache will be stored. The cache is a flat directory of json files (one per environment).</li><li class="css-q43a5f"><code class="css-hvghbq">--cache-envs</code>: If exporting multiple environments, this flag can be used to specify, with regexes, which environments to cache. If not specified, all environments are cached.</li></ul><p class="css-1ftn47p">Notes:</p><ul class="css-cvh4i0"><li class="css-q43a5f">Using the cache might be slower than evaluating jsonnet directy. It is only recommended for environments that are very CPU intensive to evaluate.</li><li class="css-q43a5f">To use object storage, you can point the <code class="css-hvghbq">--cache-path</code> to a FUSE mount, such as <a href="https://github.com/s3fs-fuse/s3fs-fuse" class="css-1iv9jyz"><code class="css-hvghbq">s3fs</code></a></li></ul><style class="vscode-highlight-styles">
  
  .material-theme-darker {
background-color: #212121;
color: #EEFFFF;
}

.material-theme-darker .mtk1 { color: #FFFFFF; }
.material-theme-darker .mtk2 { color: #212121; }
.material-theme-darker .mtk3 { color: #545454; }
.material-theme-darker .mtk4 { color: #F78C6C; }
.material-theme-darker .mtk5 { color: #89DDFF; }
.material-theme-darker .mtk6 { color: #C3E88D; }
.material-theme-darker .mtk7 { color: #FFCB6B; }
.material-theme-darker .mtk8 { color: #EEFFFF; }
.material-theme-darker .mtk9 { color: #82AAFF; }
.material-theme-darker .mtk10 { color: #FF5370; }
.material-theme-darker .mtk11 { color: #F07178; }
.material-theme-darker .mtk12 { color: #C792EA; }
.material-theme-darker .mtk13 { color: #EEFFFF90; }
.material-theme-darker .mtk14 { color: #65737E; }
.material-theme-darker .mtk15 { color: #B2CCD6; }
.material-theme-darker .mtk16 { color: #C17E70; }
.material-theme-darker .mtki { font-style: italic; }
.material-theme-darker .mtkb { font-weight: bold; }
.material-theme-darker .mtku { text-decoration: underline; text-underline-position: under; }
</style></div></div></main></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/exporting";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-8d34c62e07e660a83f29.js"],"app":["/app-e4f721d262bd192a9d56.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-099d9276a41f4ba01a3c.js"],"component---docs-completion-md":["/component---docs-completion-md-3d444c7b31269f9b6ec9.js"],"component---docs-config-md":["/component---docs-config-md-b129057e083bbcf09ffa.js"],"component---docs-diff-strategy-md":["/component---docs-diff-strategy-md-3a37de5c388718b7b408.js"],"component---docs-directory-structure-md":["/component---docs-directory-structure-md-18abaebc982ce82e05fe.js"],"component---docs-env-vars-md":["/component---docs-env-vars-md-102b70747bbd7865e8e8.js"],"component---docs-exporting-md":["/component---docs-exporting-md-4be6f959269cfaf1c33c.js"],"component---docs-faq-md":["/component---docs-faq-md-5e30ff990ba5de27e68d.js"],"component---docs-formatting-md":["/component---docs-formatting-md-0886509974e2523e2e68.js"],"component---docs-garbage-collection-md":["/component---docs-garbage-collection-md-9e3ddba81e297bbaee58.js"],"component---docs-helm-mdx":["/component---docs-helm-mdx-0730387dd149969caec7.js"],"component---docs-inline-environments-mdx":["/component---docs-inline-environments-mdx-97c38c31e192a8ccde50.js"],"component---docs-installation-mdx":["/component---docs-installation-mdx-7ad4e0c7dba1a15d9b30.js"],"component---docs-introduction-mdx":["/component---docs-introduction-mdx-53424fcd5b068bb753bd.js"],"component---docs-jsonnet-injecting-values-md":["/component---docs-jsonnet-injecting-values-md-a2e9fadf417770db1b80.js"],"component---docs-jsonnet-main-md":["/component---docs-jsonnet-main-md-041efed1c891707fb3eb.js"],"component---docs-jsonnet-native-functions-md":["/component---docs-jsonnet-native-functions-md-2b62620b62d073a3473b.js"],"component---docs-jsonnet-overview-md":["/component---docs-jsonnet-overview-md-6c9f04d4b74c33015980.js"],"component---docs-known-issues-md":["/component---docs-known-issues-md-2b1c7bae83f2275bce8c.js"],"component---docs-kustomize-mdx":["/component---docs-kustomize-mdx-d06aba68c415a0bc6218.js"],"component---docs-libraries-import-paths-md":["/component---docs-libraries-import-paths-md-66101570b47f56c1f2a9.js"],"component---docs-libraries-install-publish-md":["/component---docs-libraries-install-publish-md-1cb5bebde0944f8f75bb.js"],"component---docs-libraries-overriding-md":["/component---docs-libraries-overriding-md-fa276ab173af1752aa4b.js"],"component---docs-namespaces-md":["/component---docs-namespaces-md-b13b0315720c525beb3f.js"],"component---docs-server-side-apply-md":["/component---docs-server-side-apply-md-47b2d22f87c232c2995a.js"],"component---docs-targets-md":["/component---docs-targets-md-123f8be890eda328d792.js"],"component---docs-tutorial-abstraction-mdx":["/component---docs-tutorial-abstraction-mdx-b97edf44038784f040f4.js"],"component---docs-tutorial-environments-mdx":["/component---docs-tutorial-environments-mdx-b932dda633298bd4750f.js"],"component---docs-tutorial-jsonnet-mdx":["/component---docs-tutorial-jsonnet-mdx-6ca6a80f6c43020e4bf5.js"],"component---docs-tutorial-k-lib-mdx":["/component---docs-tutorial-k-lib-mdx-6d38544bf4a1f3e9161e.js"],"component---docs-tutorial-overview-mdx":["/component---docs-tutorial-overview-mdx-8f13b33275df5aab9200.js"],"component---docs-tutorial-parameterizing-mdx":["/component---docs-tutorial-parameterizing-mdx-cb9c8ff66607e77042cd.js"],"component---docs-tutorial-refresher-mdx":["/component---docs-tutorial-refresher-mdx-0a8938ddd4380045b737.js"],"component---src-components-home-snippet-mdx":[],"component---src-components-install-jb-arch-mdx":[],"component---src-components-install-jb-binary-mdx":[],"component---src-components-install-jb-go-mdx":[],"component---src-components-install-jb-osx-mdx":[],"component---src-components-install-tk-arch-mdx":[],"component---src-components-install-tk-binary-mdx":[],"component---src-components-install-tk-go-mdx":[],"component---src-components-install-tk-osx-mdx":[]};/*]]>*/</script><script src="/pr-preview/pr-891/polyfill-8d34c62e07e660a83f29.js" nomodule=""></script><script src="/pr-preview/pr-891/component---docs-exporting-md-4be6f959269cfaf1c33c.js" async=""></script><script src="/pr-preview/pr-891/app-e4f721d262bd192a9d56.js" async=""></script><script src="/pr-preview/pr-891/f0e45107-91cefa4606c78384043e.js" async=""></script><script src="/pr-preview/pr-891/styles-95d00f891faf7b06d026.js" async=""></script><script src="/pr-preview/pr-891/framework-3d5d6f3c5ba6d5f455c5.js" async=""></script><script src="/pr-preview/pr-891/webpack-runtime-ab565a268c55f9a48625.js" async=""></script></body></html>