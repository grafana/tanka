<!DOCTYPE html><html lang="en" dir="ltr" data-has-toc data-has-sidebar data-theme="dark" class="astro-4luwd72w"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Helm support | Grafana Tanka</title><link rel="canonical" href="https://tanka.dev/helm/"/><link rel="sitemap" href="/sitemap-index.xml"/><base href="https://tanka.dev"/><link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml"/><meta name="generator" content="Astro v4.16.14"/><meta name="generator" content="Starlight v0.29.2"/><meta property="og:title" content="Helm support"/><meta property="og:type" content="article"/><meta property="og:url" content="https://tanka.dev/helm/"/><meta property="og:locale" content="en"/><meta property="og:description" content="Grafana Tanka is the robust configuration utility for your Kubernetes cluster, powered by the Jsonnet language."/><meta property="og:site_name" content="Grafana Tanka"/><meta name="twitter:card" content="summary_large_image"/><meta name="description" content="Grafana Tanka is the robust configuration utility for your Kubernetes cluster, powered by the Jsonnet language."/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg> <svg aria-hidden="true" class="dark astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg> <svg aria-hidden="true" class="auto astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> </template><link rel="stylesheet" href="/_astro/index.BIgSTjA6.css">
<style>:root{--sl-badge-default-border: var(--sl-color-accent);--sl-badge-default-bg: var(--sl-color-accent-low);--sl-badge-default-text: #fff;--sl-badge-note-border: var(--sl-color-blue);--sl-badge-note-bg: var(--sl-color-blue-low);--sl-badge-note-text: #fff;--sl-badge-danger-border: var(--sl-color-red);--sl-badge-danger-bg: var(--sl-color-red-low);--sl-badge-danger-text: #fff;--sl-badge-success-border: var(--sl-color-green);--sl-badge-success-bg: var(--sl-color-green-low);--sl-badge-success-text: #fff;--sl-badge-caution-border: var(--sl-color-orange);--sl-badge-caution-bg: var(--sl-color-orange-low);--sl-badge-caution-text: #fff;--sl-badge-tip-border: var(--sl-color-purple);--sl-badge-tip-bg: var(--sl-color-purple-low);--sl-badge-tip-text: #fff}[data-theme=light]:root{--sl-badge-default-bg: var(--sl-color-accent-high);--sl-badge-note-bg: var(--sl-color-blue-high);--sl-badge-danger-bg: var(--sl-color-red-high);--sl-badge-success-bg: var(--sl-color-green-high);--sl-badge-caution-bg: var(--sl-color-orange-high);--sl-badge-tip-bg: var(--sl-color-purple-high)}.sl-badge:where(.astro-32s2y7fp){display:inline-block;border:1px solid var(--sl-color-border-badge);border-radius:.25rem;font-family:var(--sl-font-system-mono);line-height:normal;color:var(--sl-color-text-badge);background-color:var(--sl-color-bg-badge);overflow-wrap:anywhere}.sidebar-content .sl-badge:where(.astro-32s2y7fp){line-height:1;font-size:var(--sl-text-xs);padding:.125rem .375rem}.sidebar-content a[aria-current=page]>.sl-badge:where(.astro-32s2y7fp){--sl-color-bg-badge: transparent;--sl-color-border-badge: currentColor;color:inherit}.default:where(.astro-32s2y7fp){--sl-color-bg-badge: var(--sl-badge-default-bg);--sl-color-border-badge: var(--sl-badge-default-border);--sl-color-text-badge: var(--sl-badge-default-text)}.note:where(.astro-32s2y7fp){--sl-color-bg-badge: var(--sl-badge-note-bg);--sl-color-border-badge: var(--sl-badge-note-border);--sl-color-text-badge: var(--sl-badge-note-text)}.danger:where(.astro-32s2y7fp){--sl-color-bg-badge: var(--sl-badge-danger-bg);--sl-color-border-badge: var(--sl-badge-danger-border);--sl-color-text-badge: var(--sl-badge-danger-text)}.success:where(.astro-32s2y7fp){--sl-color-bg-badge: var(--sl-badge-success-bg);--sl-color-border-badge: var(--sl-badge-success-border);--sl-color-text-badge: var(--sl-badge-success-text)}.tip:where(.astro-32s2y7fp){--sl-color-bg-badge: var(--sl-badge-tip-bg);--sl-color-border-badge: var(--sl-badge-tip-border);--sl-color-text-badge: var(--sl-badge-tip-text)}.caution:where(.astro-32s2y7fp){--sl-color-bg-badge: var(--sl-badge-caution-bg);--sl-color-border-badge: var(--sl-badge-caution-border);--sl-color-text-badge: var(--sl-badge-caution-text)}.small:where(.astro-32s2y7fp){font-size:var(--sl-text-xs);padding:.125rem .25rem}.medium:where(.astro-32s2y7fp){font-size:var(--sl-text-sm);padding:.175rem .35rem}.large:where(.astro-32s2y7fp){font-size:var(--sl-text-base);padding:.225rem .45rem}.sl-markdown-content :is(h1,h2,h3,h4,h5,h6) .sl-badge:where(.astro-32s2y7fp){vertical-align:middle}
.card-grid:where(.astro-h6eotmwa){display:grid;grid-template-columns:100%;gap:1rem}.card-grid:where(.astro-h6eotmwa)>*{margin-top:0!important}@media (min-width: 50rem){.card-grid:where(.astro-h6eotmwa){grid-template-columns:1fr 1fr;gap:1.5rem}.stagger:where(.astro-h6eotmwa){--stagger-height: 5rem;padding-bottom:var(--stagger-height)}.stagger:where(.astro-h6eotmwa)>*:nth-child(2n){transform:translateY(var(--stagger-height))}}
.card:where(.astro-4bpbzapi){--sl-card-border: var(--sl-color-purple);--sl-card-bg: var(--sl-color-purple-low);border:1px solid var(--sl-color-gray-5);background-color:var(--sl-color-black);padding:clamp(1rem,calc(.125rem + 3vw),2.5rem);flex-direction:column;gap:clamp(.5rem,calc(.125rem + 1vw),1rem)}.card:where(.astro-4bpbzapi):nth-child(4n+1){--sl-card-border: var(--sl-color-orange);--sl-card-bg: var(--sl-color-orange-low)}.card:where(.astro-4bpbzapi):nth-child(4n+3){--sl-card-border: var(--sl-color-green);--sl-card-bg: var(--sl-color-green-low)}.card:where(.astro-4bpbzapi):nth-child(4n+4){--sl-card-border: var(--sl-color-red);--sl-card-bg: var(--sl-color-red-low)}.card:where(.astro-4bpbzapi):nth-child(4n+5){--sl-card-border: var(--sl-color-blue);--sl-card-bg: var(--sl-color-blue-low)}.title:where(.astro-4bpbzapi){font-weight:600;font-size:var(--sl-text-h4);color:var(--sl-color-white);line-height:var(--sl-line-height-headings);gap:1rem;align-items:center}.card:where(.astro-4bpbzapi) .icon:where(.astro-4bpbzapi){border:1px solid var(--sl-card-border);background-color:var(--sl-card-bg);padding:.2em;border-radius:.25rem}.card:where(.astro-4bpbzapi) .body:where(.astro-4bpbzapi){margin:0;font-size:clamp(var(--sl-text-sm),calc(.5rem + 1vw),var(--sl-text-body))}
svg:where(.astro-mibabgrf){color:var(--sl-icon-color);font-size:var(--sl-icon-size, 1em);width:1em;height:1em}
starlight-tabs:where(.astro-oof6biuk){display:block}.tablist-wrapper:where(.astro-oof6biuk){overflow-x:auto}:where(.astro-oof6biuk)[role=tablist]{display:flex;list-style:none;border-bottom:2px solid var(--sl-color-gray-5);padding:0}.tab:where(.astro-oof6biuk){margin-bottom:-2px}.tab:where(.astro-oof6biuk)>:where(.astro-oof6biuk)[role=tab]{display:flex;align-items:center;gap:.5rem;padding:0 1.25rem;text-decoration:none;border-bottom:2px solid var(--sl-color-gray-5);color:var(--sl-color-gray-3);outline-offset:var(--sl-outline-offset-inside);overflow-wrap:initial}.tab:where(.astro-oof6biuk) :where(.astro-oof6biuk)[role=tab][aria-selected=true]{color:var(--sl-color-white);border-color:var(--sl-color-text-accent);font-weight:600}.tablist-wrapper:where(.astro-oof6biuk)~[role=tabpanel]{margin-top:1rem}
.sl-steps{--bullet-size: calc(var(--sl-line-height) * 1rem);--bullet-margin: .375rem;list-style:none;counter-reset:steps-counter var(--sl-steps-start, 0);padding-inline-start:0}.sl-steps>li{counter-increment:steps-counter;position:relative;padding-inline-start:calc(var(--bullet-size) + 1rem);padding-bottom:1px;min-height:calc(var(--bullet-size) + var(--bullet-margin))}.sl-steps>li+li{margin-top:0}.sl-steps>li:before{content:counter(steps-counter);position:absolute;top:0;inset-inline-start:0;width:var(--bullet-size);height:var(--bullet-size);line-height:var(--bullet-size);font-size:var(--sl-text-xs);font-weight:600;text-align:center;color:var(--sl-color-white);background-color:var(--sl-color-gray-6);border-radius:99rem;box-shadow:inset 0 0 0 1px var(--sl-color-gray-5)}.sl-steps>li:after{--guide-width: 1px;content:"";position:absolute;top:calc(var(--bullet-size) + var(--bullet-margin));bottom:var(--bullet-margin);inset-inline-start:calc((var(--bullet-size) - var(--guide-width)) / 2);width:var(--guide-width);background-color:var(--sl-color-hairline-light)}.sl-steps>li>:first-child{--lh: calc(1em * var(--sl-line-height));--shift-y: calc(.5 * (var(--bullet-size) - var(--lh)));transform:translateY(var(--shift-y));margin-bottom:var(--shift-y)}.sl-steps>li>:first-child:where(h1,h2,h3,h4,h5,h6){--lh: calc(1em * var(--sl-line-height-headings))}@supports (--prop: 1lh){.sl-steps>li>:first-child{--lh: 1lh}}
starlight-file-tree:where(.astro-6zawfuyw){--x-space: 1.5rem;--y-space: .125rem;--y-pad: 0;display:block;border:1px solid var(--sl-color-gray-5);padding:1rem;background-color:var(--sl-color-gray-6);font-size:var(--sl-text-xs);font-family:var(--__sl-font-mono);overflow-x:auto}starlight-file-tree:where(.astro-6zawfuyw) .directory>details{border:0;padding:0;padding-inline-start:var(--x-space);background:transparent}starlight-file-tree:where(.astro-6zawfuyw) .directory>details>summary{margin-inline-start:calc(-1 * var(--x-space));border:0;padding:var(--y-pad) .625rem;font-weight:400;color:var(--sl-color-white);max-width:100%}starlight-file-tree:where(.astro-6zawfuyw) .directory>details>summary::marker,starlight-file-tree:where(.astro-6zawfuyw) .directory>details>summary::-webkit-details-marker{color:var(--sl-color-gray-3)}starlight-file-tree:where(.astro-6zawfuyw) .directory>details>summary:hover,starlight-file-tree:where(.astro-6zawfuyw) .directory>details>summary:hover .tree-icon{cursor:pointer;color:var(--sl-color-text-accent);fill:var(--sl-color-text-accent)}starlight-file-tree:where(.astro-6zawfuyw) .directory>details>summary:hover~ul{border-color:var(--sl-color-gray-4)}starlight-file-tree:where(.astro-6zawfuyw) .directory>details>summary:hover .highlight .tree-icon{fill:var(--sl-color-text-invert)}starlight-file-tree:where(.astro-6zawfuyw) ul{margin-inline-start:.5rem;border-inline-start:1px solid var(--sl-color-gray-5);padding:0;padding-inline-start:.125rem;list-style:none}starlight-file-tree:where(.astro-6zawfuyw)>ul{margin:0;border:0;padding:0}starlight-file-tree:where(.astro-6zawfuyw) li{margin:var(--y-space) 0;padding:var(--y-pad) 0}starlight-file-tree:where(.astro-6zawfuyw) .file{margin-inline-start:calc(var(--x-space) - .125rem);color:var(--sl-color-white)}starlight-file-tree:where(.astro-6zawfuyw) .tree-entry{display:inline-flex;align-items:flex-start;flex-wrap:wrap;max-width:calc(100% - 1rem)}@media (min-width: 30em){starlight-file-tree:where(.astro-6zawfuyw) .tree-entry{flex-wrap:nowrap}}starlight-file-tree:where(.astro-6zawfuyw) .tree-entry>:first-child{flex-shrink:0}starlight-file-tree:where(.astro-6zawfuyw) .empty{color:var(--sl-color-gray-3);padding-inline-start:.375rem}starlight-file-tree:where(.astro-6zawfuyw) .comment{color:var(--sl-color-gray-3);padding-inline-start:1.625rem;max-width:24rem;min-width:12rem}starlight-file-tree:where(.astro-6zawfuyw) .highlight{display:inline-block;border-radius:.25rem;padding-inline-end:.5rem;color:var(--sl-color-text-invert);background-color:var(--sl-color-text-accent)}starlight-file-tree:where(.astro-6zawfuyw) svg{display:inline;fill:var(--sl-color-gray-3);vertical-align:middle;margin-inline:.25rem .375rem;width:.875rem;height:.875rem}starlight-file-tree:where(.astro-6zawfuyw) .highlight svg.tree-icon{fill:var(--sl-color-text-invert)}
.sl-link-button:where(.astro-hhv6mbhj){align-items:center;border:1px solid transparent;border-radius:999rem;display:inline-flex;font-size:var(--sl-text-sm);gap:.5em;line-height:1.1875;outline-offset:.25rem;padding:.4375rem 1.125rem;text-decoration:none}.sl-link-button:where(.astro-hhv6mbhj).primary{background:var(--sl-color-text-accent);border-color:var(--sl-color-text-accent);color:var(--sl-color-black)}.sl-link-button:where(.astro-hhv6mbhj).primary:hover{color:var(--sl-color-black)}.sl-link-button:where(.astro-hhv6mbhj).secondary{border-color:inherit;color:var(--sl-color-white)}.sl-link-button:where(.astro-hhv6mbhj).minimal{color:var(--sl-color-white);padding-inline:0}.sl-link-button:where(.astro-hhv6mbhj) svg{flex-shrink:0}@media (min-width: 50rem){.sl-link-button:where(.astro-hhv6mbhj){font-size:var(--sl-text-base);padding:.9375rem 1.25rem}}.sl-markdown-content .sl-link-button:where(.astro-hhv6mbhj){margin-inline-end:1rem}.sl-markdown-content .sl-link-button:where(.astro-hhv6mbhj):not(:where(p *)){margin-block:1rem}
</style><script type="module" src="/_astro/hoisted.4027bKsZ.js"></script>
<script type="module" src="/_astro/page.7qqag-5g.js"></script><script src="/_astro/Tabs.astro_astro_type_script_index_0_lang.3nBd5krW.js" type="module"></script></head> <body class="astro-4luwd72w"> <a href="#_top" class="astro-olcalxcr">Skip to content</a>  <div class="page sl-flex astro-plvchew7"> <header class="header astro-plvchew7"><div class="header sl-flex astro-aol4uy5b"> <div class="title-wrapper sl-flex astro-aol4uy5b"> <a href="/" class="site-title sl-flex astro-46ktsdi6">  <img class="astro-46ktsdi6" alt="Grafana Tanka logo" src="/_astro/logo.D9L7aiSf.svg" width="144" height="69">  <span class="astro-46ktsdi6"> Grafana Tanka </span> </a>  </div> <div class="sl-flex astro-aol4uy5b"> <site-search data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}" class="astro-doja4yvx"> <button data-open-modal disabled aria-label="Search" aria-keyshortcuts="Control+K" class="astro-doja4yvx"> <svg aria-hidden="true" class="astro-doja4yvx astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg>  <span class="sl-hidden md:sl-block astro-doja4yvx" aria-hidden="true">Search</span> <kbd class="sl-hidden md:sl-flex astro-doja4yvx" style="display: none;"> <kbd class="astro-doja4yvx">Ctrl</kbd><kbd class="astro-doja4yvx">K</kbd> </kbd> </button> <dialog style="padding:0" aria-label="Search" class="astro-doja4yvx"> <div class="dialog-frame sl-flex astro-doja4yvx">  <button data-close-modal class="sl-flex md:sl-hidden astro-doja4yvx"> Cancel </button> <div class="search-container astro-doja4yvx"> <div id="starlight__search" class="astro-doja4yvx"></div> </div> </div> </dialog> </site-search>  <script>
	(() => {
		const openBtn = document.querySelector('button[data-open-modal]');
		const shortcut = openBtn?.querySelector('kbd');
		if (!openBtn || !(shortcut instanceof HTMLElement)) return;
		const platformKey = shortcut.querySelector('kbd');
		if (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {
			platformKey.textContent = 'âŒ˜';
			openBtn.setAttribute('aria-keyshortcuts', 'Meta+K');
		}
		shortcut.style.display = '';
	})();
</script>    </div> <div class="sl-hidden md:sl-flex right-group astro-aol4uy5b"> <div class="sl-flex social-icons astro-aol4uy5b"> <a href="https://github.com/grafana/tanka" rel="me" class="sl-flex astro-lezfoiyl"><span class="sr-only astro-lezfoiyl">GitHub</span><svg aria-hidden="true" class="astro-lezfoiyl astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-rixkociz"> <span class="sr-only astro-rixkociz">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-rixkociz astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" class="astro-rixkociz"> <option value="dark" class="astro-rixkociz">Dark</option><option value="light" class="astro-rixkociz">Light</option><option value="auto" selected class="astro-rixkociz">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-rixkociz astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div> </div> </header> <nav class="sidebar astro-plvchew7" aria-label="Main"> <starlight-menu-button class="astro-nzq3t4n2"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-nzq3t4n2"> <svg aria-hidden="true" class="astro-nzq3t4n2 astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg>  </button> </starlight-menu-button>    <div id="starlight__sidebar" class="sidebar-pane astro-plvchew7"> <div class="sidebar-content sl-flex astro-plvchew7"> <sl-sidebar-state-persist data-hash="1amrmh5" class="astro-dyn4ovlq"> <script>
		(() => {
			try {
				if (!matchMedia('(min-width: 50em)').matches) return;
				/** @type {HTMLElement | null} */
				const target = document.querySelector('sl-sidebar-state-persist');
				const state = JSON.parse(sessionStorage.getItem('sl-sidebar-state') || '0');
				if (!target || !state || target.dataset.hash !== state.hash) return;
				window._starlightScrollRestore = state.scroll;
				customElements.define(
					'sl-sidebar-restore',
					class SidebarRestore extends HTMLElement {
						connectedCallback() {
							try {
								const idx = parseInt(this.dataset.index || '');
								const details = this.closest('details');
								if (details && typeof state.open[idx] === 'boolean') details.open = state.open[idx];
							} catch {}
						}
					}
				);
			} catch {}
		})();
	</script>  <ul class="top-level astro-jatlzgla"> <li class="astro-jatlzgla"> <a href="/install/" class="large astro-jatlzgla"> <span class="astro-jatlzgla">Installation</span>  </a> </li><li class="astro-jatlzgla"> <details class="astro-jatlzgla"> <sl-sidebar-restore data-index="0"></sl-sidebar-restore> <summary class="astro-jatlzgla"> <div class="group-label astro-jatlzgla"> <span class="large astro-jatlzgla">Tutorial</span>  </div> <svg aria-hidden="true" class="caret astro-jatlzgla astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-jatlzgla"> <li class="astro-jatlzgla"> <a href="/tutorial/overview/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Overview</span>  </a> </li><li class="astro-jatlzgla"> <a href="/tutorial/refresher/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Refresher on deploying</span>  </a> </li><li class="astro-jatlzgla"> <a href="/tutorial/jsonnet/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Using Jsonnet</span>  </a> </li><li class="astro-jatlzgla"> <a href="/tutorial/parameters/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Parameterizing</span>  </a> </li><li class="astro-jatlzgla"> <a href="/tutorial/abstraction/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Abstraction</span>  </a> </li><li class="astro-jatlzgla"> <a href="/tutorial/k-lib/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Kubernetes library</span>  </a> </li><li class="astro-jatlzgla"> <a href="/tutorial/environments/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Environments</span>  </a> </li> </ul>  </details> </li><li class="astro-jatlzgla"> <details class="astro-jatlzgla"> <sl-sidebar-restore data-index="1"></sl-sidebar-restore> <summary class="astro-jatlzgla"> <div class="group-label astro-jatlzgla"> <span class="large astro-jatlzgla">Writing Jsonnet</span>  </div> <svg aria-hidden="true" class="caret astro-jatlzgla astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-jatlzgla"> <li class="astro-jatlzgla"> <a href="/jsonnet/overview/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Syntax overview</span>  </a> </li><li class="astro-jatlzgla"> <a href="/jsonnet/main/" class="astro-jatlzgla"> <span class="astro-jatlzgla">main.jsonnet</span>  </a> </li><li class="astro-jatlzgla"> <a href="/jsonnet/native/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Native Functions</span>  </a> </li><li class="astro-jatlzgla"> <a href="/jsonnet/injecting-values/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Injecting Values</span>  </a> </li> </ul>  </details> </li><li class="astro-jatlzgla"> <details class="astro-jatlzgla"> <sl-sidebar-restore data-index="2"></sl-sidebar-restore> <summary class="astro-jatlzgla"> <div class="group-label astro-jatlzgla"> <span class="large astro-jatlzgla">Libraries</span>  </div> <svg aria-hidden="true" class="caret astro-jatlzgla astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-jatlzgla"> <li class="astro-jatlzgla"> <a href="/libraries/import-paths/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Import paths</span>  </a> </li><li class="astro-jatlzgla"> <a href="/libraries/install-publish/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Installing and publishing</span>  </a> </li><li class="astro-jatlzgla"> <a href="/libraries/overriding/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Overriding vendor</span>  </a> </li> </ul>  </details> </li><li class="astro-jatlzgla"> <details open class="astro-jatlzgla"> <sl-sidebar-restore data-index="3"></sl-sidebar-restore> <summary class="astro-jatlzgla"> <div class="group-label astro-jatlzgla"> <span class="large astro-jatlzgla">Advanced features</span>  </div> <svg aria-hidden="true" class="caret astro-jatlzgla astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-jatlzgla"> <li class="astro-jatlzgla"> <a href="/garbage-collection/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Garbage collection</span>  </a> </li><li class="astro-jatlzgla"> <a href="/helm/" aria-current="page" class="astro-jatlzgla"> <span class="astro-jatlzgla">Helm support</span>  </a> </li><li class="astro-jatlzgla"> <a href="/kustomize/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Kustomize support</span>  </a> </li><li class="astro-jatlzgla"> <a href="/output-filtering/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Output filtering</span>  </a> </li><li class="astro-jatlzgla"> <a href="/exporting/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Exporting as YAML</span>  </a> </li><li class="astro-jatlzgla"> <a href="/inline-environments/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Inline environments</span>  </a> </li><li class="astro-jatlzgla"> <a href="/server-side-apply/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Server-Side Apply</span>  </a> </li> </ul>  </details> </li><li class="astro-jatlzgla"> <details class="astro-jatlzgla"> <sl-sidebar-restore data-index="4"></sl-sidebar-restore> <summary class="astro-jatlzgla"> <div class="group-label astro-jatlzgla"> <span class="large astro-jatlzgla">References</span>  </div> <svg aria-hidden="true" class="caret astro-jatlzgla astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-jatlzgla"> <li class="astro-jatlzgla"> <a href="/config/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Configuration Reference</span>  </a> </li><li class="astro-jatlzgla"> <a href="/directory-structure/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Directory structure</span>  </a> </li><li class="astro-jatlzgla"> <a href="/env-vars/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Environment variables</span>  </a> </li><li class="astro-jatlzgla"> <a href="/completion/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Command-line completion</span>  </a> </li><li class="astro-jatlzgla"> <a href="/diff-strategy/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Diff strategies</span>  </a> </li><li class="astro-jatlzgla"> <a href="/namespaces/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Namespaces</span>  </a> </li><li class="astro-jatlzgla"> <a href="/formatting/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Formatting</span>  </a> </li> </ul>  </details> </li><li class="astro-jatlzgla"> <a href="/faq/" class="large astro-jatlzgla"> <span class="astro-jatlzgla">Frequently asked questions</span>  </a> </li><li class="astro-jatlzgla"> <a href="/known-issues/" class="large astro-jatlzgla"> <span class="astro-jatlzgla">Known issues</span>  </a> </li><li class="astro-jatlzgla"> <details class="astro-jatlzgla"> <sl-sidebar-restore data-index="5"></sl-sidebar-restore> <summary class="astro-jatlzgla"> <div class="group-label astro-jatlzgla"> <span class="large astro-jatlzgla">Project internals</span>  </div> <svg aria-hidden="true" class="caret astro-jatlzgla astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-jatlzgla"> <li class="astro-jatlzgla"> <a href="/internal/releasing/" class="astro-jatlzgla"> <span class="astro-jatlzgla">Releasing a new version</span>  </a> </li> </ul>  </details> </li> </ul>   <script>
		(() => {
			const scroller = document.getElementById('starlight__sidebar');
			if (!window._starlightScrollRestore || !scroller) return;
			scroller.scrollTop = window._starlightScrollRestore;
			delete window._starlightScrollRestore;
		})();
	</script> </sl-sidebar-state-persist>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-yspppykv"> <div class="sl-flex social-icons astro-yspppykv"> <a href="https://github.com/grafana/tanka" rel="me" class="sl-flex astro-lezfoiyl"><span class="sr-only astro-lezfoiyl">GitHub</span><svg aria-hidden="true" class="astro-lezfoiyl astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-rixkociz"> <span class="sr-only astro-rixkociz">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-rixkociz astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" class="astro-rixkociz"> <option value="dark" class="astro-rixkociz">Dark</option><option value="light" class="astro-rixkociz">Light</option><option value="auto" selected class="astro-rixkociz">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-rixkociz astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div>  </div> </div> </div> </nav> <div class="main-frame astro-plvchew7">   <div class="lg:sl-flex astro-vxuaezio"> <aside class="right-sidebar-container astro-vxuaezio"> <div class="right-sidebar astro-vxuaezio"> <div class="lg:sl-hidden astro-evcdqhzb"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-kasrnjty"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-kasrnjty"><details id="starlight__mobile-toc" class="astro-kasrnjty"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-kasrnjty"><div class="toggle sl-flex astro-kasrnjty">On this page<svg aria-hidden="true" class="caret astro-kasrnjty astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </div><span class="display-current astro-kasrnjty"></span></summary><div class="dropdown astro-kasrnjty"><ul class="isMobile astro-lbtmlupc" style="--depth: 0;"> <li class="astro-lbtmlupc" style="--depth: 0;"> <a href="./helm/#_top" class="astro-lbtmlupc" style="--depth: 0;"> <span class="astro-lbtmlupc" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-lbtmlupc" style="--depth: 0;"> <a href="./helm/#consuming-helm-charts-from-jsonnet" class="astro-lbtmlupc" style="--depth: 0;"> <span class="astro-lbtmlupc" style="--depth: 0;">Consuming Helm Charts from Jsonnet</span> </a>  </li><li class="astro-lbtmlupc" style="--depth: 0;"> <a href="./helm/#vendoring-helm-charts" class="astro-lbtmlupc" style="--depth: 0;"> <span class="astro-lbtmlupc" style="--depth: 0;">Vendoring Helm Charts</span> </a> <ul class="isMobile astro-lbtmlupc" style="--depth: 1;"> <li class="astro-lbtmlupc" style="--depth: 1;"> <a href="./helm/#vendor-location" class="astro-lbtmlupc" style="--depth: 1;"> <span class="astro-lbtmlupc" style="--depth: 1;">Vendor Location</span> </a>  </li><li class="astro-lbtmlupc" style="--depth: 1;"> <a href="./helm/#charttool" class="astro-lbtmlupc" style="--depth: 1;"> <span class="astro-lbtmlupc" style="--depth: 1;">Charttool</span> </a>  </li> </ul>  </li><li class="astro-lbtmlupc" style="--depth: 0;"> <a href="./helm/#troubleshooting" class="astro-lbtmlupc" style="--depth: 0;"> <span class="astro-lbtmlupc" style="--depth: 0;">Troubleshooting</span> </a> <ul class="isMobile astro-lbtmlupc" style="--depth: 1;"> <li class="astro-lbtmlupc" style="--depth: 1;"> <a href="./helm/#helm-executable-missing" class="astro-lbtmlupc" style="--depth: 1;"> <span class="astro-lbtmlupc" style="--depth: 1;">Helm executable missing</span> </a>  </li><li class="astro-lbtmlupc" style="--depth: 1;"> <a href="./helm/#optscalledfrom-unset" class="astro-lbtmlupc" style="--depth: 1;"> <span class="astro-lbtmlupc" style="--depth: 1;">opts.calledFrom unset</span> </a>  </li><li class="astro-lbtmlupc" style="--depth: 1;"> <a href="./helm/#failed-to-find-chart" class="astro-lbtmlupc" style="--depth: 1;"> <span class="astro-lbtmlupc" style="--depth: 1;">Failed to find Chart</span> </a>  </li><li class="astro-lbtmlupc" style="--depth: 1;"> <a href="./helm/#two-resources-share-the-same-name" class="astro-lbtmlupc" style="--depth: 1;"> <span class="astro-lbtmlupc" style="--depth: 1;">Two resources share the same name</span> </a>  </li> </ul>  </li> </ul> </div></details></nav></mobile-starlight-toc></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-evcdqhzb"><div class="sl-container astro-evcdqhzb"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-lbtmlupc" style="--depth: 0;"> <li class="astro-lbtmlupc" style="--depth: 0;"> <a href="./helm/#_top" class="astro-lbtmlupc" style="--depth: 0;"> <span class="astro-lbtmlupc" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-lbtmlupc" style="--depth: 0;"> <a href="./helm/#consuming-helm-charts-from-jsonnet" class="astro-lbtmlupc" style="--depth: 0;"> <span class="astro-lbtmlupc" style="--depth: 0;">Consuming Helm Charts from Jsonnet</span> </a>  </li><li class="astro-lbtmlupc" style="--depth: 0;"> <a href="./helm/#vendoring-helm-charts" class="astro-lbtmlupc" style="--depth: 0;"> <span class="astro-lbtmlupc" style="--depth: 0;">Vendoring Helm Charts</span> </a> <ul class="astro-lbtmlupc" style="--depth: 1;"> <li class="astro-lbtmlupc" style="--depth: 1;"> <a href="./helm/#vendor-location" class="astro-lbtmlupc" style="--depth: 1;"> <span class="astro-lbtmlupc" style="--depth: 1;">Vendor Location</span> </a>  </li><li class="astro-lbtmlupc" style="--depth: 1;"> <a href="./helm/#charttool" class="astro-lbtmlupc" style="--depth: 1;"> <span class="astro-lbtmlupc" style="--depth: 1;">Charttool</span> </a>  </li> </ul>  </li><li class="astro-lbtmlupc" style="--depth: 0;"> <a href="./helm/#troubleshooting" class="astro-lbtmlupc" style="--depth: 0;"> <span class="astro-lbtmlupc" style="--depth: 0;">Troubleshooting</span> </a> <ul class="astro-lbtmlupc" style="--depth: 1;"> <li class="astro-lbtmlupc" style="--depth: 1;"> <a href="./helm/#helm-executable-missing" class="astro-lbtmlupc" style="--depth: 1;"> <span class="astro-lbtmlupc" style="--depth: 1;">Helm executable missing</span> </a>  </li><li class="astro-lbtmlupc" style="--depth: 1;"> <a href="./helm/#optscalledfrom-unset" class="astro-lbtmlupc" style="--depth: 1;"> <span class="astro-lbtmlupc" style="--depth: 1;">opts.calledFrom unset</span> </a>  </li><li class="astro-lbtmlupc" style="--depth: 1;"> <a href="./helm/#failed-to-find-chart" class="astro-lbtmlupc" style="--depth: 1;"> <span class="astro-lbtmlupc" style="--depth: 1;">Failed to find Chart</span> </a>  </li><li class="astro-lbtmlupc" style="--depth: 1;"> <a href="./helm/#two-resources-share-the-same-name" class="astro-lbtmlupc" style="--depth: 1;"> <span class="astro-lbtmlupc" style="--depth: 1;">Two resources share the same name</span> </a>  </li> </ul>  </li> </ul> </nav></starlight-toc></div></div> </div> </aside> <div class="main-pane astro-vxuaezio">  <main data-pagefind-body lang="en" dir="ltr" class="astro-4luwd72w">    <div class="content-panel astro-w3wzy4lo"> <div class="sl-container astro-w3wzy4lo"> <h1 id="_top" class="astro-jha6xbzj">Helm support</h1>  </div> </div>  <div class="content-panel astro-w3wzy4lo"> <div class="sl-container astro-w3wzy4lo"> <div class="sl-markdown-content"> <p>The <a href="https://helm.sh">Helm</a> project is the biggest ecosystem of high quality,
well maintained application definitions for Kubernetes.</p>
<p>Even though Grafana Tanka uses the <a href="./jsonnet/overview/">Jsonnet language</a> for
resource definition, you can still consume Helm resources, as described below.</p>
<h2 id="consuming-helm-charts-from-jsonnet">Consuming Helm Charts from Jsonnet</h2>
<p>Helm support is provided using the
<a href="https://github.com/grafana/jsonnet-libs/tree/master/tanka-util"><code dir="auto">github.com/grafana/jsonnet-libs/tanka-util</code></a>
library. Install it with:</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.j8ofn.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">jb</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">github.com/grafana/jsonnet-libs/tanka-util</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="jb install github.com/grafana/jsonnet-libs/tanka-util"><div></div></button></div></figure></div>
<p>The following example shows how to extract the individual resources of the
<a href="https://artifacthub.io/packages/helm/grafana/grafana"><code dir="auto">grafana</code></a> Helm Chart:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="jsonnet"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">local</span><span style="--0:#D6DEEB;--1:#403F53"> tanka </span><span style="--0:#7FDBCA;--1:#097174">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#9B504E">"github.com/grafana/jsonnet-libs/tanka-util/main.libsonnet"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">local</span><span style="--0:#D6DEEB;--1:#403F53"> helm </span><span style="--0:#7FDBCA;--1:#097174">=</span><span style="--0:#D6DEEB;--1:#403F53"> tanka.helm.</span><span style="--0:#82AAFF;--1:#3C63B3">new</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C5E478;--1:#3C63B3">std.thisFile</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#403F53">  </span></span><span style="--0:#D7DBE0;--1:#403F53">grafana:</span><span style="--0:#D6DEEB;--1:#403F53"> helm.</span><span style="--0:#82AAFF;--1:#3C63B3">template</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#ECC48D;--1:#9B504E">"grafana"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#ECC48D;--1:#9B504E">"./charts/grafana"</span><span style="--0:#D6DEEB;--1:#403F53">, {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">namespace: </span><span style="--0:#ECC48D;--1:#9B504E">"monitoring"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">values: {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">persistence: { enabled: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53"> }</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">})</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="local tanka = import &#x22;github.com/grafana/jsonnet-libs/tanka-util/main.libsonnet&#x22;;local helm = tanka.helm.new(std.thisFile);{  grafana: helm.template(&#x22;grafana&#x22;, &#x22;./charts/grafana&#x22;, {    namespace: &#x22;monitoring&#x22;,    values: {      persistence: { enabled: true }    }  })}"><div></div></button></div></figure></div>
<p>The Chart itself is required to be <a href="./helm/#vendoring-helm-charts">vendored at a relative
path</a>, in this case <code dir="auto">./charts/grafana</code>.</p>
<aside aria-label="Caution" class="starlight-aside starlight-aside--caution"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 16C11.8022 16 11.6089 16.0587 11.4444 16.1686C11.28 16.2784 11.1518 16.4346 11.0761 16.6173C11.0004 16.8001 10.9806 17.0011 11.0192 17.1951C11.0578 17.3891 11.153 17.5673 11.2929 17.7071C11.4327 17.847 11.6109 17.9422 11.8049 17.9808C11.9989 18.0194 12.2 17.9996 12.3827 17.9239C12.5654 17.8482 12.7216 17.72 12.8315 17.5556C12.9413 17.3911 13 17.1978 13 17C13 16.7348 12.8946 16.4805 12.7071 16.2929C12.5196 16.1054 12.2652 16 12 16ZM22.67 17.47L14.62 3.47003C14.3598 3.00354 13.9798 2.61498 13.5192 2.3445C13.0586 2.07401 12.5341 1.9314 12 1.9314C11.4659 1.9314 10.9414 2.07401 10.4808 2.3445C10.0202 2.61498 9.64019 3.00354 9.38 3.47003L1.38 17.47C1.11079 17.924 0.966141 18.441 0.960643 18.9688C0.955144 19.4966 1.089 20.0166 1.34868 20.4761C1.60837 20.9356 1.9847 21.3185 2.43968 21.5861C2.89466 21.8536 3.41218 21.9964 3.94 22H20.06C20.5921 22.0053 21.1159 21.8689 21.5779 21.6049C22.0399 21.341 22.4234 20.9589 22.689 20.4978C22.9546 20.0368 23.0928 19.5134 23.0895 18.9814C23.0862 18.4493 22.9414 17.9277 22.67 17.47ZM20.94 19.47C20.8523 19.626 20.7245 19.7556 20.5697 19.8453C20.4149 19.935 20.2389 19.9815 20.06 19.98H3.94C3.76111 19.9815 3.5851 19.935 3.43032 19.8453C3.27553 19.7556 3.14765 19.626 3.06 19.47C2.97223 19.318 2.92602 19.1456 2.92602 18.97C2.92602 18.7945 2.97223 18.622 3.06 18.47L11.06 4.47003C11.1439 4.30623 11.2714 4.16876 11.4284 4.07277C11.5855 3.97678 11.766 3.92599 11.95 3.92599C12.134 3.92599 12.3145 3.97678 12.4716 4.07277C12.6286 4.16876 12.7561 4.30623 12.84 4.47003L20.89 18.47C20.9892 18.6199 21.0462 18.7937 21.055 18.9732C21.0638 19.1527 21.0241 19.3312 20.94 19.49V19.47ZM12 8.00003C11.7348 8.00003 11.4804 8.10538 11.2929 8.29292C11.1054 8.48046 11 8.73481 11 9.00003V13C11 13.2652 11.1054 13.5196 11.2929 13.7071C11.4804 13.8947 11.7348 14 12 14C12.2652 14 12.5196 13.8947 12.7071 13.7071C12.8946 13.5196 13 13.2652 13 13V9.00003C13 8.73481 12.8946 8.48046 12.7071 8.29292C12.5196 8.10538 12.2652 8.00003 12 8.00003Z"></path></svg>Caution</p><div class="starlight-aside__content"><p>You <strong>MUST</strong> include the <code dir="auto">.new(std.thisFile)</code> part in the import.
This is what tells Tanka where you actually call <code dir="auto">helm.template()</code> from, so it
can find your vendored Charts.</p></div></aside>
<p>Once invoked, the <code dir="auto">$.grafana</code> key holds the individual resources of Helm Chart as
a regular Jsonnet object that looks roughly like so:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="jsonnet"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#403F53">  </span></span><span style="--0:#D7DBE0;--1:#403F53">cluster_role_binding_grafana_clusterrolebinding:</span><span style="--0:#D6DEEB;--1:#403F53"> {</span><span style="--0:#809191;--1:#616671">/* ... */</span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#403F53">  </span></span><span style="--0:#D7DBE0;--1:#403F53">cluster_role_grafana_clusterrole:</span><span style="--0:#D6DEEB;--1:#403F53"> {</span><span style="--0:#809191;--1:#616671">/* ... */</span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#403F53">  </span></span><span style="--0:#D7DBE0;--1:#403F53">config_map_grafana:</span><span style="--0:#D6DEEB;--1:#403F53"> {</span><span style="--0:#809191;--1:#616671">/* ... */</span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#403F53">  </span></span><span style="--0:#D7DBE0;--1:#403F53">config_map_grafana_test:</span><span style="--0:#D6DEEB;--1:#403F53"> {</span><span style="--0:#809191;--1:#616671">/* ... */</span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#403F53">  </span></span><span style="--0:#D7DBE0;--1:#403F53">deployment_grafana:</span><span style="--0:#D6DEEB;--1:#403F53"> {</span><span style="--0:#809191;--1:#616671">/* ... */</span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#809191;--1:#616671">// ...</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  cluster_role_binding_grafana_clusterrolebinding: {/* ... */},  cluster_role_grafana_clusterrole: {/* ... */},  config_map_grafana: {/* ... */},  config_map_grafana_test: {/* ... */},  deployment_grafana: {/* ... */},  // ...}"><div></div></button></div></figure></div>
<p>Above can be <a href="./tutorial/environments/#patching">manipulated</a> in the same way as any other Jsonnet data.</p>
<p>Under the hood, this feature invokes the
<a href="https://helm.sh/docs/helm/helm_template/"><code dir="auto">helm template</code></a> CLI command.
The following options control how the command is invoked:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="jsonnet"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">...</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#403F53">  </span></span><span style="--0:#D7DBE0;--1:#403F53">grafana:</span><span style="--0:#D6DEEB;--1:#403F53"> helm.</span><span style="--0:#82AAFF;--1:#3C63B3">template</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#ECC48D;--1:#9B504E">"grafana"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#ECC48D;--1:#9B504E">"./charts/grafana"</span><span style="--0:#D6DEEB;--1:#403F53">, {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">namespace: </span><span style="--0:#ECC48D;--1:#9B504E">"monitoring"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">values: {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">persistence: { enabled: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53"> }</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#809191;--1:#616671">// Equivalent to: --api-versions v1 --api-versions apps/v1</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">apiVersions: [</span><span style="--0:#ECC48D;--1:#9B504E">'v1'</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#ECC48D;--1:#9B504E">'apps/v1'</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#809191;--1:#616671">// Equivalent to: --kube-version v1.20.0</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">kubeVersion: </span><span style="--0:#ECC48D;--1:#9B504E">'v1.20.0'</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#809191;--1:#616671">// Equivalent to: --no-hooks</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">noHooks: </span><span style="--0:#82AAFF;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="...{  grafana: helm.template(&#x22;grafana&#x22;, &#x22;./charts/grafana&#x22;, {    namespace: &#x22;monitoring&#x22;,    values: {      persistence: { enabled: true }    },    // Equivalent to: --api-versions v1 --api-versions apps/v1    apiVersions: [&#x27;v1&#x27;, &#x27;apps/v1&#x27;]    // Equivalent to: --kube-version v1.20.0    kubeVersion: &#x27;v1.20.0&#x27;    // Equivalent to: --no-hooks    noHooks: true,}"><div></div></button></div></figure></div>
<p>Tanka will install Custom Resource Definitions (CRDs) automatically, if the
Helm Chart requires them and ships them in <code dir="auto">crds/</code>. This is equivalent to <code dir="auto">helm template --include-crds</code>. This can be disabled using <code dir="auto">includeCrds: false</code>:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="jsonnet"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#403F53">  </span></span><span style="--0:#D7DBE0;--1:#403F53">grafana:</span><span style="--0:#D6DEEB;--1:#403F53"> helm.</span><span style="--0:#82AAFF;--1:#3C63B3">template</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#ECC48D;--1:#9B504E">"grafana"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#ECC48D;--1:#9B504E">"./charts/grafana"</span><span style="--0:#D6DEEB;--1:#403F53">, {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">includeCrds: </span><span style="--0:#82AAFF;--1:#3C63B3">false</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">})</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  grafana: helm.template(&#x22;grafana&#x22;, &#x22;./charts/grafana&#x22;, {    includeCrds: false  })}"><div></div></button></div></figure></div>
<h2 id="vendoring-helm-charts">Vendoring Helm Charts</h2>
<p>Tanka, like Jsonnet, is hermetic. It <strong>always yields the same
resources</strong> when the project is
strictly self-contained.</p>
<p>Helm however keeps Charts and repository configuration somewhere around
<code dir="auto">~/.config/helm</code>, which violates above requirement.</p>
<p>To comply with this requirement, Tanka expects Helm Charts to be found <strong>inside the
bounds of a project</strong>. This means, you MUST put your Charts <strong>somewhere next to
the file that calls <code dir="auto">helm.template()</code></strong>, so that it can be referred to using a
relative path.</p>
<h3 id="vendor-location">Vendor Location</h3>
<p>Where to actually put them inside the project is up to you, but keep in mind you
need to refer to them using relative paths.</p>
<p>We recommend always writing libraries that wrap the actual Helm Chart, so the
consumer does not need to be aware of it. Whether you put these into your local <code dir="auto">lib/</code> directory or
publish and vendor them into the <code dir="auto">vendor/</code> directory is up to you.</p>
<p>A library usually looks like this:</p>
<starlight-file-tree class="not-content astro-6zawfuyw" data-pagefind-ignore><ul><li class="directory"><details open><summary><span class="tree-entry"><span class=""><span><span class="sr-only">Directory</span><svg width="16" height="16" class="tree-icon" aria-hidden="true" viewBox="0 0 24 24"><path d="M22.073 4.900L22.073 4.900L12.148 4.900L12.148 3.950Q12.148 3.125 11.585 2.563Q11.023 2 10.198 2L10.198 2L0.048 2L0.048 22L23.948 22L23.948 6.850Q23.998 6.025 23.448 5.462Q22.898 4.900 22.073 4.900Z"></path></svg></span>/
</span></span></summary><ul><li class="file"><span class="tree-entry"><span class=""><span><svg width="16" height="16" class="tree-icon" aria-hidden="true" viewBox="0 0 24 24"><path d="M0.734 13.269L0.562 10.732Q1.938 10.732 2.497 10.087L2.497 10.087Q2.884 9.614 2.884 8.711L2.884 8.711Q2.884 8.324 2.798 7.571Q2.712 6.819 2.712 6.410Q2.712 6.002 2.669 5.185L2.669 5.185Q2.583 4.454 2.583 4.153L2.583 4.153Q2.583 2.089 3.787 1.099Q4.991 0.111 7.184 0.111L7.184 0.111L8.259 0.111L8.259 2.648L7.700 2.648Q6.754 2.648 6.345 3.185Q5.937 3.723 5.937 4.798L5.937 4.798Q5.937 5.056 6.023 5.572L6.023 5.572Q6.109 6.217 6.109 6.561L6.109 6.561Q6.109 6.819 6.152 7.378L6.152 7.378Q6.238 8.152 6.238 8.582L6.238 8.582Q6.238 10.216 5.550 11.033L5.550 11.033Q4.948 11.764 3.658 12.065L3.658 12.065Q4.948 12.409 5.550 13.097L5.550 13.097Q6.238 13.957 6.238 15.548L6.238 15.548Q6.238 16.021 6.152 16.795L6.152 16.795Q6.066 17.354 6.088 17.612Q6.109 17.870 6.023 18.515L6.023 18.515Q5.937 18.988 5.937 19.203L5.937 19.203Q5.937 20.278 6.345 20.815Q6.754 21.353 7.700 21.353L7.700 21.353L8.259 21.353L8.259 23.890L7.184 23.890Q2.712 23.890 2.712 19.848L2.712 19.848Q2.712 18.386 2.862 17.590Q3.013 16.795 3.013 15.290L3.013 15.290Q3.013 13.269 0.734 13.269L0.734 13.269ZM23.438 10.732L23.438 13.011Q21.159 13.011 21.159 15.032L21.159 15.032Q21.159 15.419 21.224 16.171Q21.288 16.924 21.288 17.311L21.288 17.311Q21.417 18.128 21.417 19.590L21.417 19.590Q21.417 23.632 16.859 23.632L16.859 23.632L15.784 23.632L15.784 21.353L16.300 21.353Q17.246 21.353 17.654 20.815Q18.063 20.278 18.063 19.203Q18.063 18.128 17.934 17.569L17.934 17.569Q17.934 17.225 17.848 16.558Q17.762 15.892 17.762 15.548L17.762 15.548Q17.762 13.957 18.450 13.097L18.450 13.097Q19.052 12.409 20.342 12.065L20.342 12.065Q19.052 11.764 18.450 11.033L18.450 11.033Q17.762 10.216 17.762 8.582L17.762 8.582Q17.762 8.152 17.848 7.378L17.848 7.378Q17.934 6.819 17.934 6.561L17.934 6.561Q18.063 5.873 18.063 4.841Q18.063 3.809 17.633 3.293Q17.203 2.777 16.300 2.648L16.300 2.648L15.784 2.648L15.784 0.111L16.859 0.111Q19.009 0.111 20.213 1.099Q21.417 2.089 21.417 4.153L21.417 4.153Q21.417 4.540 21.352 5.292Q21.288 6.045 21.288 6.432L21.288 6.432Q21.159 7.249 21.116 8.711L21.116 8.711Q21.159 9.614 21.503 10.087L21.503 10.087Q22.062 10.732 23.438 10.732L23.438 10.732Z"></path></svg></span>jsonnetfile.json</span></span></li><li class="file"><span class="tree-entry"><span class=""><span><svg width="16" height="16" class="tree-icon" aria-hidden="true" viewBox="0 0 24 24"><path d="M1.082 16.876L1.082 14.014L22.918 14.014L22.918 16.876L1.082 16.876ZM1.082 9.986L1.082 7.071L13.272 7.071L13.272 9.986L1.082 9.986ZM1.082 3.096L1.082 0.181L22.918 0.181L22.918 3.096L1.082 3.096ZM1.082 23.819L1.082 20.904L17.300 20.904L17.300 23.819L1.082 23.819Z"></path></svg></span>main.libsonnet</span></span></li></ul></details></li></ul></starlight-file-tree> 
<p>When adopting Helm inside it, we recommend vendoring at the top level, as such:</p>
<starlight-file-tree class="not-content astro-6zawfuyw" data-pagefind-ignore><ul><li class="directory"><details open><summary><span class="tree-entry"><span class=""><span><span class="sr-only">Directory</span><svg width="16" height="16" class="tree-icon" aria-hidden="true" viewBox="0 0 24 24"><path d="M22.073 4.900L22.073 4.900L12.148 4.900L12.148 3.950Q12.148 3.125 11.585 2.563Q11.023 2 10.198 2L10.198 2L0.048 2L0.048 22L23.948 22L23.948 6.850Q23.998 6.025 23.448 5.462Q22.898 4.900 22.073 4.900Z"></path></svg></span>/
</span></span></summary><ul><li class="file"><span class="tree-entry"><span class=""><span><svg width="16" height="16" class="tree-icon" aria-hidden="true" viewBox="0 0 24 24"><path d="M0.734 13.269L0.562 10.732Q1.938 10.732 2.497 10.087L2.497 10.087Q2.884 9.614 2.884 8.711L2.884 8.711Q2.884 8.324 2.798 7.571Q2.712 6.819 2.712 6.410Q2.712 6.002 2.669 5.185L2.669 5.185Q2.583 4.454 2.583 4.153L2.583 4.153Q2.583 2.089 3.787 1.099Q4.991 0.111 7.184 0.111L7.184 0.111L8.259 0.111L8.259 2.648L7.700 2.648Q6.754 2.648 6.345 3.185Q5.937 3.723 5.937 4.798L5.937 4.798Q5.937 5.056 6.023 5.572L6.023 5.572Q6.109 6.217 6.109 6.561L6.109 6.561Q6.109 6.819 6.152 7.378L6.152 7.378Q6.238 8.152 6.238 8.582L6.238 8.582Q6.238 10.216 5.550 11.033L5.550 11.033Q4.948 11.764 3.658 12.065L3.658 12.065Q4.948 12.409 5.550 13.097L5.550 13.097Q6.238 13.957 6.238 15.548L6.238 15.548Q6.238 16.021 6.152 16.795L6.152 16.795Q6.066 17.354 6.088 17.612Q6.109 17.870 6.023 18.515L6.023 18.515Q5.937 18.988 5.937 19.203L5.937 19.203Q5.937 20.278 6.345 20.815Q6.754 21.353 7.700 21.353L7.700 21.353L8.259 21.353L8.259 23.890L7.184 23.890Q2.712 23.890 2.712 19.848L2.712 19.848Q2.712 18.386 2.862 17.590Q3.013 16.795 3.013 15.290L3.013 15.290Q3.013 13.269 0.734 13.269L0.734 13.269ZM23.438 10.732L23.438 13.011Q21.159 13.011 21.159 15.032L21.159 15.032Q21.159 15.419 21.224 16.171Q21.288 16.924 21.288 17.311L21.288 17.311Q21.417 18.128 21.417 19.590L21.417 19.590Q21.417 23.632 16.859 23.632L16.859 23.632L15.784 23.632L15.784 21.353L16.300 21.353Q17.246 21.353 17.654 20.815Q18.063 20.278 18.063 19.203Q18.063 18.128 17.934 17.569L17.934 17.569Q17.934 17.225 17.848 16.558Q17.762 15.892 17.762 15.548L17.762 15.548Q17.762 13.957 18.450 13.097L18.450 13.097Q19.052 12.409 20.342 12.065L20.342 12.065Q19.052 11.764 18.450 11.033L18.450 11.033Q17.762 10.216 17.762 8.582L17.762 8.582Q17.762 8.152 17.848 7.378L17.848 7.378Q17.934 6.819 17.934 6.561L17.934 6.561Q18.063 5.873 18.063 4.841Q18.063 3.809 17.633 3.293Q17.203 2.777 16.300 2.648L16.300 2.648L15.784 2.648L15.784 0.111L16.859 0.111Q19.009 0.111 20.213 1.099Q21.417 2.089 21.417 4.153L21.417 4.153Q21.417 4.540 21.352 5.292Q21.288 6.045 21.288 6.432L21.288 6.432Q21.159 7.249 21.116 8.711L21.116 8.711Q21.159 9.614 21.503 10.087L21.503 10.087Q22.062 10.732 23.438 10.732L23.438 10.732Z"></path></svg></span>jsonnetfile.json</span></span></li><li class="file"><span class="tree-entry"><span class=""><span><svg width="16" height="16" class="tree-icon" aria-hidden="true" viewBox="0 0 24 24"><path d="M1.082 16.876L1.082 14.014L22.918 14.014L22.918 16.876L1.082 16.876ZM1.082 9.986L1.082 7.071L13.272 7.071L13.272 9.986L1.082 9.986ZM1.082 3.096L1.082 0.181L22.918 0.181L22.918 3.096L1.082 3.096ZM1.082 23.819L1.082 20.904L17.300 20.904L17.300 23.819L1.082 23.819Z"></path></svg></span>main.libsonnet</span></span></li></ul></details></li><li class="directory"><details open><summary><span class="tree-entry"><span class="highlight"><span><span class="sr-only">Directory</span><svg width="16" height="16" class="tree-icon" aria-hidden="true" viewBox="0 0 24 24"><path d="M22.073 4.900L22.073 4.900L12.148 4.900L12.148 3.950Q12.148 3.125 11.585 2.563Q11.023 2 10.198 2L10.198 2L0.048 2L0.048 22L23.948 22L23.948 6.850Q23.998 6.025 23.448 5.462Q22.898 4.900 22.073 4.900Z"></path></svg></span><strong>charts</strong></span></span></summary><ul><li class="file"><span class="tree-entry"><span class="highlight"><span><svg width="16" height="16" class="tree-icon" aria-hidden="true" viewBox="0 0 24 24"><path d="M1.082 16.876L1.082 14.014L22.918 14.014L22.918 16.876L1.082 16.876ZM1.082 9.986L1.082 7.071L13.272 7.071L13.272 9.986L1.082 9.986ZM1.082 3.096L1.082 0.181L22.918 0.181L22.918 3.096L1.082 3.096ZM1.082 23.819L1.082 20.904L17.300 20.904L17.300 23.819L1.082 23.819Z"></path></svg></span><strong>&#x3C;someChart></strong></span></span></li></ul></details></li></ul></starlight-file-tree> 
<p>This way, you can refer to the charts as <code dir="auto">./charts/&#x3C;someChart></code> from inside
<code dir="auto">main.libsonnet</code>. By keeping the chart as close to the consumer as possible, the
library is kept portable.</p>
<h3 id="charttool">Charttool</h3>
<p>Helm does not make vendoring incredibly easy by itself. <code dir="auto">helm pull</code> provides the
required plumbing, but it does not record its actions in a reproducible manner.</p>
<p>Therefore, Tanka ships a special utility at <code dir="auto">tk tool charts</code>, which automates
<code dir="auto">helm pull</code>:</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Create a chartfile.yaml in the current directory, e.g. in lib/myLibrary</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tk</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">tool</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">charts</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">init</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Install the MySQL chart at version 1.6.7 from the stable repository</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tk</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">tool</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">charts</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">add</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stable/mysql@1.6.7</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="tk tool charts inittk tool charts add stable/mysql@1.6.7"><div></div></button></div></figure></div>
<h4 id="adding-charts">Adding charts</h4>
<p>To add a chart, use the following:</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tk</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">tool</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">charts</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">add</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">&#x3C;repo>/&#x3C;name>@&#x3C;version></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="tk tool charts add <repo>/<name>@<version>"><div></div></button></div></figure></div>
<p>This will also call <code dir="auto">tk tool charts vendor</code>, so that the <code dir="auto">charts/</code> directory is updated.</p>
<h4 id="adding-repositories">Adding repositories</h4>
<p>By default, the <code dir="auto">stable</code> repository is automatically set up for you. If you wish
to add another repository, you can use the <code dir="auto">add-repo</code> command:</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#809191;--1:#616671"># Add the official Grafana repository</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tk</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">tool</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">charts</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">add-repo</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">grafana</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">https://grafana.github.io/helm-charts</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="tk tool charts add-repo grafana https://grafana.github.io/helm-charts"><div></div></button></div></figure></div>
<p>Another way is to modify <code dir="auto">chartfile.yaml</code> directly:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">chartfile.yaml</span></figcaption><pre data-language="diff"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">version: 1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">repositories:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- name: stable</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">url: https://charts.helm.sh/stable</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53"> </span></span><span style="--0:#D6DEEB;--1:#403F53">- name: grafana</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">   </span></span><span style="--0:#D6DEEB;--1:#403F53">url: https://grafana.github.io/helm-charts</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="version: 1repositories:  - name: stable    url: https://charts.helm.sh/stable - name: grafana   url: https://grafana.github.io/helm-charts"><div></div></button></div></figure></div>
<h4 id="installing-multiple-versions-of-the-same-chart">Installing multiple versions of the same chart</h4>
<p>If you wish to install multiple versions of the same chart, you can write them to a specific directory.<br>
You can do so with a <code dir="auto">:&#x3C;directory></code> suffix in the <code dir="auto">add</code> command, or by modifying the chartfile manually.</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tk</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">tool</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">charts</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">add</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stable/mysql@1.6.7:1.6.7</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tk</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">tool</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">charts</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">add</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">stable/mysql@1.6.8:1.6.8</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="tk tool charts add stable/mysql@1.6.7:1.6.7tk tool charts add stable/mysql@1.6.8:1.6.8"><div></div></button></div></figure></div>
<p>The resulting chartfile will look like this:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="yaml"><code><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">version</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">directory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">charts</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">repositories</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">stable</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">url</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">https://charts.helm.sh/stable</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">requires</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">chart</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">stable/mysql</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">directory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1.6.7</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">version</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1.6.7</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">chart</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">stable/mysql</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">directory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1.6.8</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">version</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1.6.8</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="version: 1directory: chartsrepositories:  - name: stable    url: https://charts.helm.sh/stablerequires:  - chart: stable/mysql    directory: 1.6.7    version: 1.6.7  - chart: stable/mysql    directory: 1.6.8    version: 1.6.8"><div></div></button></div></figure></div>
<h4 id="install-charts-from-chartfile">Install charts from chartfile</h4>
<p>To install charts from an existing chartfile, use the following:</p>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3C63B3">tk</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">tool</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">charts</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3C63B3">vendor</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="tk tool charts vendor"><div></div></button></div></figure></div>
<p>Optionally, you can also pass the <code dir="auto">--prune</code> flag to remove vendored charts that are no longer in the chartfile.</p>
<h4 id="oci-registry-support">OCI Registry Support</h4>
<p>Tanka supports pulling charts from OCI registries. To use one, the chart name must be split into two parts: the registry and the chart name.</p>
<p>As example, if you wanted to pull the <code dir="auto">oci://public.ecr.aws/karpenter/karpenter:v0.27.3</code> image, your chartfile would look like this:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="yaml"><code><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">version</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">directory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">charts</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">repositories</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">name</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">karpenter</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">url</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">oci://public.ecr.aws/karpenter</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">requires</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#7FDBCA;--1:#111111">chart</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">karpenter/karpenter</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">directory</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">v0.27.3</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">version</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#ECC48D;--1:#3C63B3">v0.27.3</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="version: 1directory: chartsrepositories:  - name: karpenter    url: oci://public.ecr.aws/karpenterrequires:  - chart: karpenter/karpenter    directory: v0.27.3    version: v0.27.3"><div></div></button></div></figure></div>
<p><em>Registry login is not supported yet.</em></p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="helm-executable-missing">Helm executable missing</h3>
<p>Helm support in Tanka requires the <code dir="auto">helm</code> binary installed on your system and
available on the <code dir="auto">$PATH</code>. If Helm is not installed, you will see this error message:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">evaluating jsonnet: RUNTIME ERROR: Expanding Helm Chart: exec: "helm": executable file not found in $PATH</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="evaluating jsonnet: RUNTIME ERROR: Expanding Helm Chart: exec: &#x22;helm&#x22;: executable file not found in $PATH"><div></div></button></div></figure></div>
<p>To solve this, you need to <a href="https://helm.sh/docs/intro/install/">install Helm</a>.
If you cannot install it system-wide, you can point Tanka at your executable
using <a href="./env-vars/#tanka_helm_path"><code dir="auto">TANKA_HELM_PATH</code></a></p>
<h3 id="optscalledfrom-unset">opts.calledFrom unset</h3>
<p>This occurs, when Tanka was not told where it <code dir="auto">helm.template()</code> was invoked
from. This most likely means you didnâ€™t call <code dir="auto">new(std.thisFile)</code> when importing <code dir="auto">tanka-util</code>:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="jsonnet"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">local</span><span style="--0:#D6DEEB;--1:#403F53"> tanka </span><span style="--0:#7FDBCA;--1:#097174">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#9B504E">"github.com/grafana/jsonnet-libs/tanka-util/main.libsonnet"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8D46B4">local</span><span style="--0:#D6DEEB;--1:#403F53"> helm </span><span style="--0:#7FDBCA;--1:#097174">=</span><span style="--0:#D6DEEB;--1:#403F53"> tanka.helm.</span><span style="--0:#82AAFF;--1:#3C63B3">new</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C5E478;--1:#3C63B3">std.thisFile</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">                       </span></span><span style="--0:#D6DEEB;--1:#403F53">â†‘ This is important</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="local tanka = import &#x22;github.com/grafana/jsonnet-libs/tanka-util/main.libsonnet&#x22;;local helm = tanka.helm.new(std.thisFile);                       â†‘ This is important"><div></div></button></div></figure></div>
<h3 id="failed-to-find-chart">Failed to find Chart</h3>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">helmTemplate: Failed to find a Chart at 'stable/grafana': No such file or directory.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">helmTemplate: Failed to find a Chart at '/home/user/stuff/tanka/environments/default/grafana': No such file or directory.</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="helmTemplate: Failed to find a Chart at &#x27;stable/grafana&#x27;: No such file or directory.helmTemplate: Failed to find a Chart at &#x27;/home/user/stuff/tanka/environments/default/grafana&#x27;: No such file or directory."><div></div></button></div></figure></div>
<p>Tanka failed to locate your Helm chart on the filesystem. It looked at the
relative path you provided in <code dir="auto">helm.template()</code>, starting from the directory of
the file you called <code dir="auto">helm.template()</code> from.</p>
<p>Please check there is actually a valid Helm chart at this place. Referring to
charts as <code dir="auto">&#x3C;repo>/&#x3C;name></code> is disallowed by design.</p>
<h3 id="two-resources-share-the-same-name">Two resources share the same name</h3>
<p>To make customization easier, <code dir="auto">helm.template()</code> returns the resources not as the
list it receives from Helm, but instead converts this into an object.</p>
<p>For the indexing key it uses <code dir="auto">kind_name</code> by default. In some rare cases, this
might not be enough to distinguish between two resources, namely when the same
resource exists in two namespaces.</p>
<p>To handle this, pass a custom name format, e.g. to also include the namespace:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="jsonnet"><code><div class="ec-line"><div class="code"><span style="--1:#403F53"><span style="--0:#D7DBE0">custom:</span><span style="--0:#D6DEEB"> helm.</span></span><span style="--0:#82AAFF;--1:#3C63B3">template</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#ECC48D;--1:#9B504E">'foo'</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#ECC48D;--1:#9B504E">'./charts/foo'</span><span style="--0:#D6DEEB;--1:#403F53">, {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">nameFormat: </span><span style="--0:#ECC48D;--1:#9B504E">'{{ print .metadata.namespace "_" .kind "_" .metadata.name | snakecase }}'</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">})</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="custom: helm.template(&#x27;foo&#x27;, &#x27;./charts/foo&#x27;, {  nameFormat: &#x27;{{ print .metadata.namespace &#x22;_&#x22; .kind &#x22;_&#x22; .metadata.name | snakecase }}&#x27;})"><div></div></button></div></figure></div>
<p>The literal default format used is <code dir="auto">{{ print .kind "_" .metadata.name | snakecase }}</code></p> </div> <footer class="sl-flex astro-ynspeaa3"> <div class="meta sl-flex astro-ynspeaa3"> <a href="https://github.com/grafana/tanka/edit/main/docs/src/content/docs/helm.mdx" class="sl-flex astro-dule76ml"><svg aria-hidden="true" class="astro-dule76ml astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.2em;"><path d="M22 7.24a1 1 0 0 0-.29-.71l-4.24-4.24a1 1 0 0 0-1.1-.22 1 1 0 0 0-.32.22l-2.83 2.83L2.29 16.05a1 1 0 0 0-.29.71V21a1 1 0 0 0 1 1h4.24a1 1 0 0 0 .76-.29l10.87-10.93L21.71 8c.1-.1.17-.2.22-.33a1 1 0 0 0 0-.24v-.14l.07-.05ZM6.83 20H4v-2.83l9.93-9.93 2.83 2.83L6.83 20ZM18.17 8.66l-2.83-2.83 1.42-1.41 2.82 2.82-1.41 1.42Z"/></svg> Edit page</a>  </div> <div class="pagination-links astro-podnrb62" dir="ltr"> <a href="/garbage-collection/" rel="prev" class="astro-podnrb62"> <svg aria-hidden="true" class="astro-podnrb62 astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg>  <span class="astro-podnrb62"> Previous <br class="astro-podnrb62"> <span class="link-title astro-podnrb62">Garbage collection</span> </span> </a> <a href="/kustomize/" rel="next" class="astro-podnrb62"> <svg aria-hidden="true" class="astro-podnrb62 astro-mibabgrf" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg>  <span class="astro-podnrb62"> Next <br class="astro-podnrb62"> <span class="link-title astro-podnrb62">Kustomize support</span> </span> </a> </div>   </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>